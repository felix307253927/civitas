<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>objects/core/settlement.js - Civitas game</title>
    
    <meta name="description" content="Civitas is an empire-building game written in Javascript with the help of the jQuery library." />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://sizeof.cat" target="_blank" class="menu-item" id="site_link" >sizeof(cat)</a></h2><h2><a href="https://github.com/sizeofcat/civitas" target="_blank" class="menu-item" id="github_link" >GitHub</a></h2><h3>Classes</h3><ul><li><a href="ai.html">ai</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ai.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ai.html#process">process</a></li></ul></li><li><a href="api.html">api</a><ul class='methods'><li data-type='method' style='display: none;'><a href="api.html#_request">_request</a></li><li data-type='method' style='display: none;'><a href="api.html#api_version">api_version</a></li><li data-type='method' style='display: none;'><a href="api.html#city_info">city_info</a></li><li data-type='method' style='display: none;'><a href="api.html#core">core</a></li><li data-type='method' style='display: none;'><a href="api.html#do_export">do_export</a></li><li data-type='method' style='display: none;'><a href="api.html#do_import">do_import</a></li><li data-type='method' style='display: none;'><a href="api.html#heartbeat">heartbeat</a></li><li data-type='method' style='display: none;'><a href="api.html#login">login</a></li><li data-type='method' style='display: none;'><a href="api.html#logout">logout</a></li><li data-type='method' style='display: none;'><a href="api.html#register">register</a></li></ul></li><li><a href="battleground.html">battleground</a><ul class='methods'><li data-type='method' style='display: none;'><a href="battleground.html#add">add</a></li><li data-type='method' style='display: none;'><a href="battleground.html#attack">attack</a></li><li data-type='method' style='display: none;'><a href="battleground.html#core">core</a></li><li data-type='method' style='display: none;'><a href="battleground.html#distance">distance</a></li><li data-type='method' style='display: none;'><a href="battleground.html#end_turn">end_turn</a></li><li data-type='method' style='display: none;'><a href="battleground.html#grid">grid</a></li><li data-type='method' style='display: none;'><a href="battleground.html#highlight_cells">highlight_cells</a></li><li data-type='method' style='display: none;'><a href="battleground.html#log">log</a></li><li data-type='method' style='display: none;'><a href="battleground.html#move">move</a></li><li data-type='method' style='display: none;'><a href="battleground.html#num_turns">num_turns</a></li><li data-type='method' style='display: none;'><a href="battleground.html#properties">properties</a></li><li data-type='method' style='display: none;'><a href="battleground.html#redraw">redraw</a></li><li data-type='method' style='display: none;'><a href="battleground.html#show_stats">show_stats</a></li></ul></li><li><a href="building.html">building</a><ul class='methods'><li data-type='method' style='display: none;'><a href="building.html#core">core</a></li><li data-type='method' style='display: none;'><a href="building.html#demolish">demolish</a></li><li data-type='method' style='display: none;'><a href="building.html#downgrade">downgrade</a></li><li data-type='method' style='display: none;'><a href="building.html#get_building_data">get_building_data</a></li><li data-type='method' style='display: none;'><a href="building.html#get_level">get_level</a></li><li data-type='method' style='display: none;'><a href="building.html#get_settlement_resources">get_settlement_resources</a></li><li data-type='method' style='display: none;'><a href="building.html#get_tax_amount">get_tax_amount</a></li><li data-type='method' style='display: none;'><a href="building.html#get_upgrade_costs">get_upgrade_costs</a></li><li data-type='method' style='display: none;'><a href="building.html#has_building_requirements">has_building_requirements</a></li><li data-type='method' style='display: none;'><a href="building.html#has_problems">has_problems</a></li><li data-type='method' style='display: none;'><a href="building.html#has_requirements">has_requirements</a></li><li data-type='method' style='display: none;'><a href="building.html#has_research_requirements">has_research_requirements</a></li><li data-type='method' style='display: none;'><a href="building.html#has_settlement_requirements">has_settlement_requirements</a></li><li data-type='method' style='display: none;'><a href="building.html#is_downgradable">is_downgradable</a></li><li data-type='method' style='display: none;'><a href="building.html#is_housing_building">is_housing_building</a></li><li data-type='method' style='display: none;'><a href="building.html#is_marketplace">is_marketplace</a></li><li data-type='method' style='display: none;'><a href="building.html#is_municipal_building">is_municipal_building</a></li><li data-type='method' style='display: none;'><a href="building.html#is_production_building">is_production_building</a></li><li data-type='method' style='display: none;'><a href="building.html#is_stopped">is_stopped</a></li><li data-type='method' style='display: none;'><a href="building.html#is_upgradable">is_upgradable</a></li><li data-type='method' style='display: none;'><a href="building.html#log_to_console">log_to_console</a></li><li data-type='method' style='display: none;'><a href="building.html#notify">notify</a></li><li data-type='method' style='display: none;'><a href="building.html#process">process</a></li><li data-type='method' style='display: none;'><a href="building.html#produce">produce</a></li><li data-type='method' style='display: none;'><a href="building.html#set_level">set_level</a></li><li data-type='method' style='display: none;'><a href="building.html#start_production">start_production</a></li><li data-type='method' style='display: none;'><a href="building.html#stop_production">stop_production</a></li><li data-type='method' style='display: none;'><a href="building.html#tax">tax</a></li><li data-type='method' style='display: none;'><a href="building.html#upgrade">upgrade</a></li></ul></li><li><a href="event.html">event</a><ul class='methods'><li data-type='method' style='display: none;'><a href="event.html#core">core</a></li><li data-type='method' style='display: none;'><a href="event.html#process">process</a></li></ul></li><li><a href="game.html">game</a><ul class='members'><li data-type='member' style='display: none;'><a href="game.html#.ACHIEVEMENTS">ACHIEVEMENTS</a></li><li data-type='member' style='display: none;'><a href="game.html#.ACTION_BUILD_PLACE">ACTION_BUILD_PLACE</a></li><li data-type='member' style='display: none;'><a href="game.html#.ACTION_CAMPAIGN">ACTION_CAMPAIGN</a></li><li data-type='member' style='display: none;'><a href="game.html#.ACTION_DIPLOMACY">ACTION_DIPLOMACY</a></li><li data-type='member' style='display: none;'><a href="game.html#.ACTION_RESEARCH">ACTION_RESEARCH</a></li><li data-type='member' style='display: none;'><a href="game.html#.API_ENTRY_POINT">API_ENTRY_POINT</a></li><li data-type='member' style='display: none;'><a href="game.html#.API_URL">API_URL</a></li><li data-type='member' style='display: none;'><a href="game.html#.API_VERSION">API_VERSION</a></li><li data-type='member' style='display: none;'><a href="game.html#.ARMOR_TYPE_CLOTH">ARMOR_TYPE_CLOTH</a></li><li data-type='member' style='display: none;'><a href="game.html#.ARMOR_TYPE_LEATHER">ARMOR_TYPE_LEATHER</a></li><li data-type='member' style='display: none;'><a href="game.html#.ARMOR_TYPE_MAIL">ARMOR_TYPE_MAIL</a></li><li data-type='member' style='display: none;'><a href="game.html#.ARMOR_TYPE_PLATE">ARMOR_TYPE_PLATE</a></li><li data-type='member' style='display: none;'><a href="game.html#.ARMY_COSTS">ARMY_COSTS</a></li><li data-type='member' style='display: none;'><a href="game.html#.ASSETS_URL">ASSETS_URL</a></li><li data-type='member' style='display: none;'><a href="game.html#.AUCTIONEER_DISCOUNT">AUCTIONEER_DISCOUNT</a></li><li data-type='member' style='display: none;'><a href="game.html#.AUTOSTART_MUSIC">AUTOSTART_MUSIC</a></li><li data-type='member' style='display: none;'><a href="game.html#.AVATARS">AVATARS</a></li><li data-type='member' style='display: none;'><a href="game.html#.BATTLEGROUND_ATTACK">BATTLEGROUND_ATTACK</a></li><li data-type='member' style='display: none;'><a href="game.html#.BATTLEGROUND_DEFENSE">BATTLEGROUND_DEFENSE</a></li><li data-type='member' style='display: none;'><a href="game.html#.BLACK_MARKET_DISCOUNT">BLACK_MARKET_DISCOUNT</a></li><li data-type='member' style='display: none;'><a href="game.html#.BUILDINGS">BUILDINGS</a></li><li data-type='member' style='display: none;'><a href="game.html#.BUILDINGS_ALL">BUILDINGS_ALL</a></li><li data-type='member' style='display: none;'><a href="game.html#.BUILDINGS_CATEGORIES">BUILDINGS_CATEGORIES</a></li><li data-type='member' style='display: none;'><a href="game.html#.CAMP">CAMP</a></li><li data-type='member' style='display: none;'><a href="game.html#.CAMPAIGN_ARMY">CAMPAIGN_ARMY</a></li><li data-type='member' style='display: none;'><a href="game.html#.CAMPAIGN_ARMY_RETURN">CAMPAIGN_ARMY_RETURN</a></li><li data-type='member' style='display: none;'><a href="game.html#.CAMPAIGN_CARAVAN">CAMPAIGN_CARAVAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.CAMPAIGN_SPY">CAMPAIGN_SPY</a></li><li data-type='member' style='display: none;'><a href="game.html#.CARAVAN_COSTS">CARAVAN_COSTS</a></li><li data-type='member' style='display: none;'><a href="game.html#.CARAVAN_INFLUENCE">CARAVAN_INFLUENCE</a></li><li data-type='member' style='display: none;'><a href="game.html#.CITY">CITY</a></li><li data-type='member' style='display: none;'><a href="game.html#.CLIMATE_ARID">CLIMATE_ARID</a></li><li data-type='member' style='display: none;'><a href="game.html#.CLIMATE_POLAR">CLIMATE_POLAR</a></li><li data-type='member' style='display: none;'><a href="game.html#.CLIMATE_TEMPERATE">CLIMATE_TEMPERATE</a></li><li data-type='member' style='display: none;'><a href="game.html#.CLIMATE_TROPICAL">CLIMATE_TROPICAL</a></li><li data-type='member' style='display: none;'><a href="game.html#.CLIMATES">CLIMATES</a></li><li data-type='member' style='display: none;'><a href="game.html#.DEBUG">DEBUG</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIFFICULTY_EASY">DIFFICULTY_EASY</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIFFICULTY_HARD">DIFFICULTY_HARD</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIFFICULTY_HARDCORE">DIFFICULTY_HARDCORE</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIFFICULTY_MEDIUM">DIFFICULTY_MEDIUM</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACIES">DIPLOMACIES</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACY_ALLIANCE">DIPLOMACY_ALLIANCE</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACY_CEASE_FIRE">DIPLOMACY_CEASE_FIRE</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACY_PACT">DIPLOMACY_PACT</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACY_PROPOSE_ALLIANCE">DIPLOMACY_PROPOSE_ALLIANCE</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACY_PROPOSE_CEASE_FIRE">DIPLOMACY_PROPOSE_CEASE_FIRE</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACY_PROPOSE_JOIN">DIPLOMACY_PROPOSE_JOIN</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACY_PROPOSE_PACT">DIPLOMACY_PROPOSE_PACT</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACY_TRUCE">DIPLOMACY_TRUCE</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACY_VASSAL">DIPLOMACY_VASSAL</a></li><li data-type='member' style='display: none;'><a href="game.html#.DIPLOMACY_WAR">DIPLOMACY_WAR</a></li><li data-type='member' style='display: none;'><a href="game.html#.ENCRYPTION">ENCRYPTION</a></li><li data-type='member' style='display: none;'><a href="game.html#.EVENTS">EVENTS</a></li><li data-type='member' style='display: none;'><a href="game.html#.EXPORT_INFLUENCE">EXPORT_INFLUENCE</a></li><li data-type='member' style='display: none;'><a href="game.html#.EXPORT_PRESTIGE">EXPORT_PRESTIGE</a></li><li data-type='member' style='display: none;'><a href="game.html#.FAME_PER_TRADE">FAME_PER_TRADE</a></li><li data-type='member' style='display: none;'><a href="game.html#.HERO_CLASS_DRUID">HERO_CLASS_DRUID</a></li><li data-type='member' style='display: none;'><a href="game.html#.HERO_CLASS_LIST">HERO_CLASS_LIST</a></li><li data-type='member' style='display: none;'><a href="game.html#.HERO_CLASS_MAGE">HERO_CLASS_MAGE</a></li><li data-type='member' style='display: none;'><a href="game.html#.HERO_CLASS_PRIEST">HERO_CLASS_PRIEST</a></li><li data-type='member' style='display: none;'><a href="game.html#.HERO_CLASS_ROGUE">HERO_CLASS_ROGUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.HERO_CLASS_SHAMAN">HERO_CLASS_SHAMAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.HERO_CLASS_WARRIOR">HERO_CLASS_WARRIOR</a></li><li data-type='member' style='display: none;'><a href="game.html#.HEROES">HEROES</a></li><li data-type='member' style='display: none;'><a href="game.html#.IMPORT_INFLUENCE">IMPORT_INFLUENCE</a></li><li data-type='member' style='display: none;'><a href="game.html#.IMPORT_PRESTIGE">IMPORT_PRESTIGE</a></li><li data-type='member' style='display: none;'><a href="game.html#.IMPORTANCE_HIGH">IMPORTANCE_HIGH</a></li><li data-type='member' style='display: none;'><a href="game.html#.IMPORTANCE_LOW">IMPORTANCE_LOW</a></li><li data-type='member' style='display: none;'><a href="game.html#.IMPORTANCE_MEDIUM">IMPORTANCE_MEDIUM</a></li><li data-type='member' style='display: none;'><a href="game.html#.IMPORTANCE_VITAL">IMPORTANCE_VITAL</a></li><li data-type='member' style='display: none;'><a href="game.html#.INITIAL_SEED">INITIAL_SEED</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_BACKPACK_NUM">ITEM_BACKPACK_NUM</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_QUALITY_COLORS">ITEM_QUALITY_COLORS</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_QUALITY_COMMON">ITEM_QUALITY_COMMON</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_QUALITY_EPIC">ITEM_QUALITY_EPIC</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_QUALITY_LEGENDARY">ITEM_QUALITY_LEGENDARY</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_QUALITY_LIST">ITEM_QUALITY_LIST</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_QUALITY_RARE">ITEM_QUALITY_RARE</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_ANY_HAND">ITEM_SLOT_ANY_HAND</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_CHEST">ITEM_SLOT_CHEST</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_FEET">ITEM_SLOT_FEET</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_HANDS">ITEM_SLOT_HANDS</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_HEAD">ITEM_SLOT_HEAD</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_LEGS">ITEM_SLOT_LEGS</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_MAIN_HAND">ITEM_SLOT_MAIN_HAND</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_NECK">ITEM_SLOT_NECK</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_NONE">ITEM_SLOT_NONE</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_OFF_HAND">ITEM_SLOT_OFF_HAND</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_RING">ITEM_SLOT_RING</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_SHOULDER">ITEM_SLOT_SHOULDER</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOT_WAIST">ITEM_SLOT_WAIST</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOTS_LIST">ITEM_SLOTS_LIST</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_SLOTS_NUM">ITEM_SLOTS_NUM</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_TYPE_ARMOR">ITEM_TYPE_ARMOR</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_TYPE_OTHER">ITEM_TYPE_OTHER</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_TYPE_WEAPON">ITEM_TYPE_WEAPON</a></li><li data-type='member' style='display: none;'><a href="game.html#.ITEM_WEAPON_DAGGER_WICKED">ITEM_WEAPON_DAGGER_WICKED</a></li><li data-type='member' style='display: none;'><a href="game.html#.MAX_CONSOLE_LINES">MAX_CONSOLE_LINES</a></li><li data-type='member' style='display: none;'><a href="game.html#.MAX_ESPIONAGE_SUCESS_RATE">MAX_ESPIONAGE_SUCESS_RATE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MAX_ESPIONAGE_VALUE">MAX_ESPIONAGE_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MAX_FAITH_VALUE">MAX_FAITH_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MAX_INFLUENCE_VALUE">MAX_INFLUENCE_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MAX_PRESTIGE_VALUE">MAX_PRESTIGE_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MAX_RESEARCH_VALUE">MAX_RESEARCH_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MAX_SETTLEMENT_ICONS">MAX_SETTLEMENT_ICONS</a></li><li data-type='member' style='display: none;'><a href="game.html#.MAX_SETTLEMENT_LEVEL">MAX_SETTLEMENT_LEVEL</a></li><li data-type='member' style='display: none;'><a href="game.html#.MAX_SETTLEMENTS">MAX_SETTLEMENTS</a></li><li data-type='member' style='display: none;'><a href="game.html#.MERCENARIES">MERCENARIES</a></li><li data-type='member' style='display: none;'><a href="game.html#.METROPOLIS">METROPOLIS</a></li><li data-type='member' style='display: none;'><a href="game.html#.MIN_ESPIONAGE_VALUE">MIN_ESPIONAGE_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MIN_FAITH_VALUE">MIN_FAITH_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MIN_FAME_VALUE">MIN_FAME_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MIN_INFLUENCE_VALUE">MIN_INFLUENCE_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MIN_PRESTIGE_VALUE">MIN_PRESTIGE_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MIN_RESEARCH_VALUE">MIN_RESEARCH_VALUE</a></li><li data-type='member' style='display: none;'><a href="game.html#.MODE_MULTIPLAYER">MODE_MULTIPLAYER</a></li><li data-type='member' style='display: none;'><a href="game.html#.MODE_SINGLEPLAYER">MODE_SINGLEPLAYER</a></li><li data-type='member' style='display: none;'><a href="game.html#.NAMES">NAMES</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_ASSYRIAN">NATION_ASSYRIAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_CARTHAGINIAN">NATION_CARTHAGINIAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_CHINESE">NATION_CHINESE</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_EGYPTIAN">NATION_EGYPTIAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_FRANKS">NATION_FRANKS</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_FRENCH">NATION_FRENCH</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_GREEK">NATION_GREEK</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_INDIAN">NATION_INDIAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_JAPANESE">NATION_JAPANESE</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_KHMER">NATION_KHMER</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_MALINESE">NATION_MALINESE</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_MONGOLIAN">NATION_MONGOLIAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_NIGERIAN">NATION_NIGERIAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_PERSAN">NATION_PERSAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_PHOENICIAN">NATION_PHOENICIAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_ROMAN">NATION_ROMAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_RUSSIAN">NATION_RUSSIAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_SPANISH">NATION_SPANISH</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_SUDANESE">NATION_SUDANESE</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_SUMERIAN">NATION_SUMERIAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_THRACIAN">NATION_THRACIAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATION_TIBETAN">NATION_TIBETAN</a></li><li data-type='member' style='display: none;'><a href="game.html#.NATIONS">NATIONS</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFICATION_MISSING_REQ">NOTIFICATION_MISSING_REQ</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFICATION_MISSING_RES">NOTIFICATION_MISSING_RES</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFICATION_PAUSED">NOTIFICATION_PAUSED</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFICATION_SETTLEMENT_LOW_LEVEL">NOTIFICATION_SETTLEMENT_LOW_LEVEL</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFY_ACHIEVEMENT">NOTIFY_ACHIEVEMENT</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFY_ERROR">NOTIFY_ERROR</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFY_EVENT">NOTIFY_EVENT</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFY_NORMAL">NOTIFY_NORMAL</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFY_RELIGION">NOTIFY_RELIGION</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFY_RESEARCH">NOTIFY_RESEARCH</a></li><li data-type='member' style='display: none;'><a href="game.html#.NOTIFY_WAR">NOTIFY_WAR</a></li><li data-type='member' style='display: none;'><a href="game.html#.PERSONALITIES">PERSONALITIES</a></li><li data-type='member' style='display: none;'><a href="game.html#.PERSONALITY_BALANCED">PERSONALITY_BALANCED</a></li><li data-type='member' style='display: none;'><a href="game.html#.PERSONALITY_DIPLOMAT">PERSONALITY_DIPLOMAT</a></li><li data-type='member' style='display: none;'><a href="game.html#.PERSONALITY_WARLORD">PERSONALITY_WARLORD</a></li><li data-type='member' style='display: none;'><a href="game.html#.PLACE_RESOURCES_REQ">PLACE_RESOURCES_REQ</a></li><li data-type='member' style='display: none;'><a href="game.html#.PLACE_TIME_TO_BUILD">PLACE_TIME_TO_BUILD</a></li><li data-type='member' style='display: none;'><a href="game.html#.POPULATION_PER_LEVEL">POPULATION_PER_LEVEL</a></li><li data-type='member' style='display: none;'><a href="game.html#.RANDOM_UNCOMMON">RANDOM_UNCOMMON</a></li><li data-type='member' style='display: none;'><a href="game.html#.RELIGION_BUDDHISM">RELIGION_BUDDHISM</a></li><li data-type='member' style='display: none;'><a href="game.html#.RELIGION_CHRISTIANITY">RELIGION_CHRISTIANITY</a></li><li data-type='member' style='display: none;'><a href="game.html#.RELIGION_CONFUCIANISM">RELIGION_CONFUCIANISM</a></li><li data-type='member' style='display: none;'><a href="game.html#.RELIGION_HINDUISM">RELIGION_HINDUISM</a></li><li data-type='member' style='display: none;'><a href="game.html#.RELIGION_ISLAM">RELIGION_ISLAM</a></li><li data-type='member' style='display: none;'><a href="game.html#.RELIGION_JUDAISM">RELIGION_JUDAISM</a></li><li data-type='member' style='display: none;'><a href="game.html#.RELIGION_NONE">RELIGION_NONE</a></li><li data-type='member' style='display: none;'><a href="game.html#.RELIGION_TAOISM">RELIGION_TAOISM</a></li><li data-type='member' style='display: none;'><a href="game.html#.RELIGIONS">RELIGIONS</a></li><li data-type='member' style='display: none;'><a href="game.html#.RESOURCE_CATEGORIES">RESOURCE_CATEGORIES</a></li><li data-type='member' style='display: none;'><a href="game.html#.RESOURCES">RESOURCES</a></li><li data-type='member' style='display: none;'><a href="game.html#.SCOUT_COSTS">SCOUT_COSTS</a></li><li data-type='member' style='display: none;'><a href="game.html#.SCOUT_MISSION_INFO">SCOUT_MISSION_INFO</a></li><li data-type='member' style='display: none;'><a href="game.html#.SEASON_AUTUMN">SEASON_AUTUMN</a></li><li data-type='member' style='display: none;'><a href="game.html#.SEASON_SPRING">SEASON_SPRING</a></li><li data-type='member' style='display: none;'><a href="game.html#.SEASON_SUMMER">SEASON_SUMMER</a></li><li data-type='member' style='display: none;'><a href="game.html#.SEASON_WINTER">SEASON_WINTER</a></li><li data-type='member' style='display: none;'><a href="game.html#.SEASONS">SEASONS</a></li><li data-type='member' style='display: none;'><a href="game.html#.SECONDS_TO_DAY">SECONDS_TO_DAY</a></li><li data-type='member' style='display: none;'><a href="game.html#.SETTLEMENT_NAMES">SETTLEMENT_NAMES</a></li><li data-type='member' style='display: none;'><a href="game.html#.SETTLEMENTS">SETTLEMENTS</a></li><li data-type='member' style='display: none;'><a href="game.html#.SHIPS">SHIPS</a></li><li data-type='member' style='display: none;'><a href="game.html#.SOLDIERS">SOLDIERS</a></li><li data-type='member' style='display: none;'><a href="game.html#.SPECIAL_PLACE">SPECIAL_PLACE</a></li><li data-type='member' style='display: none;'><a href="game.html#.SPY_COSTS">SPY_COSTS</a></li><li data-type='member' style='display: none;'><a href="game.html#.SPY_MISSION_INFLUENCE">SPY_MISSION_INFLUENCE</a></li><li data-type='member' style='display: none;'><a href="game.html#.SPY_MISSION_INSTIGATE">SPY_MISSION_INSTIGATE</a></li><li data-type='member' style='display: none;'><a href="game.html#.SPY_MISSION_NONE">SPY_MISSION_NONE</a></li><li data-type='member' style='display: none;'><a href="game.html#.SPY_MISSION_RELIGION">SPY_MISSION_RELIGION</a></li><li data-type='member' style='display: none;'><a href="game.html#.SPY_MISSION_STEAL_RESOURCES">SPY_MISSION_STEAL_RESOURCES</a></li><li data-type='member' style='display: none;'><a href="game.html#.SPY_MISSIONS">SPY_MISSIONS</a></li><li data-type='member' style='display: none;'><a href="game.html#.STORAGE_KEY">STORAGE_KEY</a></li><li data-type='member' style='display: none;'><a href="game.html#.TECHNOLOGIES">TECHNOLOGIES</a></li><li data-type='member' style='display: none;'><a href="game.html#.TRADES_ADDITION">TRADES_ADDITION</a></li><li data-type='member' style='display: none;'><a href="game.html#.TRADES_DISCOUNT">TRADES_DISCOUNT</a></li><li data-type='member' style='display: none;'><a href="game.html#.VERSION">VERSION</a></li><li data-type='member' style='display: none;'><a href="game.html#.VILLAGE">VILLAGE</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE">WEAPON_TYPE_MELEE</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE_AXE_ONE_HAND">WEAPON_TYPE_MELEE_AXE_ONE_HAND</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE_AXE_TWO_HAND">WEAPON_TYPE_MELEE_AXE_TWO_HAND</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE_DAGGER">WEAPON_TYPE_MELEE_DAGGER</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE_FIST">WEAPON_TYPE_MELEE_FIST</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE_MACE_ONE_HAND">WEAPON_TYPE_MELEE_MACE_ONE_HAND</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE_MACE_TWO_HAND">WEAPON_TYPE_MELEE_MACE_TWO_HAND</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE_POLEARM">WEAPON_TYPE_MELEE_POLEARM</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE_STAFF">WEAPON_TYPE_MELEE_STAFF</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE_SWORD_ONE_HAND">WEAPON_TYPE_MELEE_SWORD_ONE_HAND</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_MELEE_SWORD_TWO_HAND">WEAPON_TYPE_MELEE_SWORD_TWO_HAND</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_RANGED">WEAPON_TYPE_RANGED</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_RANGED_BOW">WEAPON_TYPE_RANGED_BOW</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_RANGED_CROSSBOW">WEAPON_TYPE_RANGED_CROSSBOW</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_RANGED_GUN">WEAPON_TYPE_RANGED_GUN</a></li><li data-type='member' style='display: none;'><a href="game.html#.WEAPON_TYPE_RANGED_THROWN">WEAPON_TYPE_RANGED_THROWN</a></li><li data-type='member' style='display: none;'><a href="game.html#.WORLD_BEAUTIFY">WORLD_BEAUTIFY</a></li><li data-type='member' style='display: none;'><a href="game.html#.WORLD_EROSION">WORLD_EROSION</a></li><li data-type='member' style='display: none;'><a href="game.html#.WORLD_GRID">WORLD_GRID</a></li><li data-type='member' style='display: none;'><a href="game.html#.WORLD_HEX_SIZE">WORLD_HEX_SIZE</a></li><li data-type='member' style='display: none;'><a href="game.html#.WORLD_SIZE_HEIGHT">WORLD_SIZE_HEIGHT</a></li><li data-type='member' style='display: none;'><a href="game.html#.WORLD_SIZE_WIDTH">WORLD_SIZE_WIDTH</a></li><li data-type='member' style='display: none;'><a href="game.html#.YEARLY_INFLUENCE_GAIN">YEARLY_INFLUENCE_GAIN</a></li><li data-type='member' style='display: none;'><a href="game.html#.YEARLY_INFLUENCE_LOSS">YEARLY_INFLUENCE_LOSS</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="game.html#.calc_price">calc_price</a></li><li data-type='method' style='display: none;'><a href="game.html#.calc_price_minus_discount">calc_price_minus_discount</a></li><li data-type='method' style='display: none;'><a href="game.html#.calc_price_plus_discount">calc_price_plus_discount</a></li><li data-type='method' style='display: none;'><a href="game.html#.get_damage_points">get_damage_points</a></li><li data-type='method' style='display: none;'><a href="game.html#.get_health_points">get_health_points</a></li><li data-type='method' style='display: none;'><a href="game.html#.get_mana_points">get_mana_points</a></li><li data-type='method' style='display: none;'><a href="game.html#.get_now">get_now</a></li><li data-type='method' style='display: none;'><a href="game.html#.get_random">get_random</a></li><li data-type='method' style='display: none;'><a href="game.html#.get_random_by_importance">get_random_by_importance</a></li><li data-type='method' style='display: none;'><a href="game.html#.get_random_unique">get_random_unique</a></li><li data-type='method' style='display: none;'><a href="game.html#.get_resource_name">get_resource_name</a></li><li data-type='method' style='display: none;'><a href="game.html#.get_up_number">get_up_number</a></li><li data-type='method' style='display: none;'><a href="game.html#.nice_numbers">nice_numbers</a></li><li data-type='method' style='display: none;'><a href="game.html#.resource_exists">resource_exists</a></li><li data-type='method' style='display: none;'><a href="game.html#.time_since">time_since</a></li><li data-type='method' style='display: none;'><a href="game.html#achievement_points">achievement_points</a></li><li data-type='method' style='display: none;'><a href="game.html#achievements">achievements</a></li><li data-type='method' style='display: none;'><a href="game.html#achievements_process">achievements_process</a></li><li data-type='method' style='display: none;'><a href="game.html#add_random_place">add_random_place</a></li><li data-type='method' style='display: none;'><a href="game.html#add_random_settlement">add_random_settlement</a></li><li data-type='method' style='display: none;'><a href="game.html#add_settlement">add_settlement</a></li><li data-type='method' style='display: none;'><a href="game.html#advice">advice</a></li><li data-type='method' style='display: none;'><a href="game.html#auctioneer">auctioneer</a></li><li data-type='method' style='display: none;'><a href="game.html#auctioneer_add">auctioneer_add</a></li><li data-type='method' style='display: none;'><a href="game.html#auctioneer_delete">auctioneer_delete</a></li><li data-type='method' style='display: none;'><a href="game.html#auctioneer_process">auctioneer_process</a></li><li data-type='method' style='display: none;'><a href="game.html#auctioneer_reset">auctioneer_reset</a></li><li data-type='method' style='display: none;'><a href="game.html#black_market">black_market</a></li><li data-type='method' style='display: none;'><a href="game.html#black_market_add">black_market_add</a></li><li data-type='method' style='display: none;'><a href="game.html#black_market_delete">black_market_delete</a></li><li data-type='method' style='display: none;'><a href="game.html#black_market_reset">black_market_reset</a></li><li data-type='method' style='display: none;'><a href="game.html#date">date</a></li><li data-type='method' style='display: none;'><a href="game.html#decrypt">decrypt</a></li><li data-type='method' style='display: none;'><a href="game.html#difficulty">difficulty</a></li><li data-type='method' style='display: none;'><a href="game.html#disband_city">disband_city</a></li><li data-type='method' style='display: none;'><a href="game.html#do_achievement">do_achievement</a></li><li data-type='method' style='display: none;'><a href="game.html#do_research">do_research</a></li><li data-type='method' style='display: none;'><a href="game.html#encrypt">encrypt</a></li><li data-type='method' style='display: none;'><a href="game.html#export">export</a></li><li data-type='method' style='display: none;'><a href="game.html#format_date">format_date</a></li><li data-type='method' style='display: none;'><a href="game.html#generate_random_army">generate_random_army</a></li><li data-type='method' style='display: none;'><a href="game.html#generate_random_navy">generate_random_navy</a></li><li data-type='method' style='display: none;'><a href="game.html#generate_random_resources">generate_random_resources</a></li><li data-type='method' style='display: none;'><a href="game.html#generate_random_settlement_data">generate_random_settlement_data</a></li><li data-type='method' style='display: none;'><a href="game.html#get_achievement_config_data">get_achievement_config_data</a></li><li data-type='method' style='display: none;'><a href="game.html#get_building_config_data">get_building_config_data</a></li><li data-type='method' style='display: none;'><a href="game.html#get_buildings_for_settlement">get_buildings_for_settlement</a></li><li data-type='method' style='display: none;'><a href="game.html#get_hero_config_data">get_hero_config_data</a></li><li data-type='method' style='display: none;'><a href="game.html#get_num_settlements">get_num_settlements</a></li><li data-type='method' style='display: none;'><a href="game.html#get_place">get_place</a></li><li data-type='method' style='display: none;'><a href="game.html#get_prod_modifier">get_prod_modifier</a></li><li data-type='method' style='display: none;'><a href="game.html#get_random_nationality">get_random_nationality</a></li><li data-type='method' style='display: none;'><a href="game.html#get_random_personality">get_random_personality</a></li><li data-type='method' style='display: none;'><a href="game.html#get_random_religion">get_random_religion</a></li><li data-type='method' style='display: none;'><a href="game.html#get_random_resource">get_random_resource</a></li><li data-type='method' style='display: none;'><a href="game.html#get_research_config_data">get_research_config_data</a></li><li data-type='method' style='display: none;'><a href="game.html#get_settings">get_settings</a></li><li data-type='method' style='display: none;'><a href="game.html#get_settlement">get_settlement</a></li><li data-type='method' style='display: none;'><a href="game.html#get_settlements">get_settlements</a></li><li data-type='method' style='display: none;'><a href="game.html#get_storage_data">get_storage_data</a></li><li data-type='method' style='display: none;'><a href="game.html#get_tax_modifier">get_tax_modifier</a></li><li data-type='method' style='display: none;'><a href="game.html#has_achievement">has_achievement</a></li><li data-type='method' style='display: none;'><a href="game.html#has_research">has_research</a></li><li data-type='method' style='display: none;'><a href="game.html#has_research_in_queue">has_research_in_queue</a></li><li data-type='method' style='display: none;'><a href="game.html#has_storage_data">has_storage_data</a></li><li data-type='method' style='display: none;'><a href="game.html#import">import</a></li><li data-type='method' style='display: none;'><a href="game.html#in_queue">in_queue</a></li><li data-type='method' style='display: none;'><a href="game.html#is_autumn">is_autumn</a></li><li data-type='method' style='display: none;'><a href="game.html#is_paused">is_paused</a></li><li data-type='method' style='display: none;'><a href="game.html#is_spring">is_spring</a></li><li data-type='method' style='display: none;'><a href="game.html#is_summer">is_summer</a></li><li data-type='method' style='display: none;'><a href="game.html#is_winter">is_winter</a></li><li data-type='method' style='display: none;'><a href="game.html#level_to_fame">level_to_fame</a></li><li data-type='method' style='display: none;'><a href="game.html#level_up">level_up</a></li><li data-type='method' style='display: none;'><a href="game.html#load_game_data">load_game_data</a></li><li data-type='method' style='display: none;'><a href="game.html#mode">mode</a></li><li data-type='method' style='display: none;'><a href="game.html#new_game">new_game</a></li><li data-type='method' style='display: none;'><a href="game.html#pause">pause</a></li><li data-type='method' style='display: none;'><a href="game.html#queue">queue</a></li><li data-type='method' style='display: none;'><a href="game.html#queue_add">queue_add</a></li><li data-type='method' style='display: none;'><a href="game.html#queue_process_action">queue_process_action</a></li><li data-type='method' style='display: none;'><a href="game.html#queue_remove_action">queue_remove_action</a></li><li data-type='method' style='display: none;'><a href="game.html#refresh_trades">refresh_trades</a></li><li data-type='method' style='display: none;'><a href="game.html#research">research</a></li><li data-type='method' style='display: none;'><a href="game.html#reset_storage_data">reset_storage_data</a></li><li data-type='method' style='display: none;'><a href="game.html#save">save</a></li><li data-type='method' style='display: none;'><a href="game.html#save_and_refresh">save_and_refresh</a></li><li data-type='method' style='display: none;'><a href="game.html#season">season</a></li><li data-type='method' style='display: none;'><a href="game.html#set_settings">set_settings</a></li><li data-type='method' style='display: none;'><a href="game.html#set_storage_data">set_storage_data</a></li><li data-type='method' style='display: none;'><a href="game.html#ui">ui</a></li><li data-type='method' style='display: none;'><a href="game.html#unpause">unpause</a></li><li data-type='method' style='display: none;'><a href="game.html#version">version</a></li><li data-type='method' style='display: none;'><a href="game.html#world">world</a></li></ul></li><li><a href="hero.html">hero</a><ul class='methods'><li data-type='method' style='display: none;'><a href="hero.html#core">core</a></li></ul></li><li><a href="jailer.html">jailer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="jailer.html#check">check</a></li><li data-type='method' style='display: none;'><a href="jailer.html#core">core</a></li></ul></li><li><a href="place.html">place</a><ul class='methods'><li data-type='method' style='display: none;'><a href="place.html#core">core</a></li><li data-type='method' style='display: none;'><a href="place.html#export">export</a></li></ul></li><li><a href="settlement.html">settlement</a><ul class='methods'><li data-type='method' style='display: none;'><a href="settlement.html#add_to_storage">add_to_storage</a></li><li data-type='method' style='display: none;'><a href="settlement.html#adjust_campaign_cost">adjust_campaign_cost</a></li><li data-type='method' style='display: none;'><a href="settlement.html#army">army</a></li><li data-type='method' style='display: none;'><a href="settlement.html#build">build</a></li><li data-type='method' style='display: none;'><a href="settlement.html#buy_from_settlement">buy_from_settlement</a></li><li data-type='method' style='display: none;'><a href="settlement.html#can_build_ships">can_build_ships</a></li><li data-type='method' style='display: none;'><a href="settlement.html#can_diplomacy">can_diplomacy</a></li><li data-type='method' style='display: none;'><a href="settlement.html#can_recruit_heroes">can_recruit_heroes</a></li><li data-type='method' style='display: none;'><a href="settlement.html#can_recruit_soldiers">can_recruit_soldiers</a></li><li data-type='method' style='display: none;'><a href="settlement.html#can_research">can_research</a></li><li data-type='method' style='display: none;'><a href="settlement.html#can_trade">can_trade</a></li><li data-type='method' style='display: none;'><a href="settlement.html#change_religion">change_religion</a></li><li data-type='method' style='display: none;'><a href="settlement.html#climate">climate</a></li><li data-type='method' style='display: none;'><a href="settlement.html#coins">coins</a></li><li data-type='method' style='display: none;'><a href="settlement.html#color">color</a></li><li data-type='method' style='display: none;'><a href="settlement.html#core">core</a></li><li data-type='method' style='display: none;'><a href="settlement.html#dec_coins">dec_coins</a></li><li data-type='method' style='display: none;'><a href="settlement.html#diplomacy">diplomacy</a></li><li data-type='method' style='display: none;'><a href="settlement.html#disband_ship">disband_ship</a></li><li data-type='method' style='display: none;'><a href="settlement.html#disband_soldier">disband_soldier</a></li><li data-type='method' style='display: none;'><a href="settlement.html#espionage">espionage</a></li><li data-type='method' style='display: none;'><a href="settlement.html#export">export</a></li><li data-type='method' style='display: none;'><a href="settlement.html#export_buildings">export_buildings</a></li><li data-type='method' style='display: none;'><a href="settlement.html#faith">faith</a></li><li data-type='method' style='display: none;'><a href="settlement.html#fame">fame</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_building">get_building</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_building_data">get_building_data</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_buildings">get_buildings</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_diplomacy_status">get_diplomacy_status</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_influence_with_settlement">get_influence_with_settlement</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_rank">get_rank</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_resources">get_resources</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_spoils">get_spoils</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_trades">get_trades</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_trades_exports">get_trades_exports</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_trades_imports">get_trades_imports</a></li><li data-type='method' style='display: none;'><a href="settlement.html#get_type">get_type</a></li><li data-type='method' style='display: none;'><a href="settlement.html#has_any_resources">has_any_resources</a></li><li data-type='method' style='display: none;'><a href="settlement.html#has_coins">has_coins</a></li><li data-type='method' style='display: none;'><a href="settlement.html#has_resource">has_resource</a></li><li data-type='method' style='display: none;'><a href="settlement.html#has_resources">has_resources</a></li><li data-type='method' style='display: none;'><a href="settlement.html#has_same_nationality">has_same_nationality</a></li><li data-type='method' style='display: none;'><a href="settlement.html#has_ships">has_ships</a></li><li data-type='method' style='display: none;'><a href="settlement.html#has_soldiers">has_soldiers</a></li><li data-type='method' style='display: none;'><a href="settlement.html#has_storage_space_for">has_storage_space_for</a></li><li data-type='method' style='display: none;'><a href="settlement.html#heroes">heroes</a></li><li data-type='method' style='display: none;'><a href="settlement.html#icon">icon</a></li><li data-type='method' style='display: none;'><a href="settlement.html#id">id</a></li><li data-type='method' style='display: none;'><a href="settlement.html#inc_coins">inc_coins</a></li><li data-type='method' style='display: none;'><a href="settlement.html#is_building_built">is_building_built</a></li><li data-type='method' style='display: none;'><a href="settlement.html#is_camp">is_camp</a></li><li data-type='method' style='display: none;'><a href="settlement.html#is_city">is_city</a></li><li data-type='method' style='display: none;'><a href="settlement.html#is_mercenary_recruited">is_mercenary_recruited</a></li><li data-type='method' style='display: none;'><a href="settlement.html#is_metropolis">is_metropolis</a></li><li data-type='method' style='display: none;'><a href="settlement.html#is_player">is_player</a></li><li data-type='method' style='display: none;'><a href="settlement.html#is_urban">is_urban</a></li><li data-type='method' style='display: none;'><a href="settlement.html#is_village">is_village</a></li><li data-type='method' style='display: none;'><a href="settlement.html#level">level</a></li><li data-type='method' style='display: none;'><a href="settlement.html#level_up">level_up</a></li><li data-type='method' style='display: none;'><a href="settlement.html#load_army">load_army</a></li><li data-type='method' style='display: none;'><a href="settlement.html#location">location</a></li><li data-type='method' style='display: none;'><a href="settlement.html#lower_espionage">lower_espionage</a></li><li data-type='method' style='display: none;'><a href="settlement.html#lower_faith">lower_faith</a></li><li data-type='method' style='display: none;'><a href="settlement.html#lower_fame">lower_fame</a></li><li data-type='method' style='display: none;'><a href="settlement.html#lower_influence">lower_influence</a></li><li data-type='method' style='display: none;'><a href="settlement.html#lower_prestige">lower_prestige</a></li><li data-type='method' style='display: none;'><a href="settlement.html#lower_research">lower_research</a></li><li data-type='method' style='display: none;'><a href="settlement.html#mercenary">mercenary</a></li><li data-type='method' style='display: none;'><a href="settlement.html#merge_army">merge_army</a></li><li data-type='method' style='display: none;'><a href="settlement.html#merge_navy">merge_navy</a></li><li data-type='method' style='display: none;'><a href="settlement.html#merge_resources">merge_resources</a></li><li data-type='method' style='display: none;'><a href="settlement.html#name">name</a></li><li data-type='method' style='display: none;'><a href="settlement.html#nationality">nationality</a></li><li data-type='method' style='display: none;'><a href="settlement.html#navy">navy</a></li><li data-type='method' style='display: none;'><a href="settlement.html#nice_name">nice_name</a></li><li data-type='method' style='display: none;'><a href="settlement.html#num_ships">num_ships</a></li><li data-type='method' style='display: none;'><a href="settlement.html#num_soldiers">num_soldiers</a></li><li data-type='method' style='display: none;'><a href="settlement.html#personality">personality</a></li><li data-type='method' style='display: none;'><a href="settlement.html#population">population</a></li><li data-type='method' style='display: none;'><a href="settlement.html#prestige">prestige</a></li><li data-type='method' style='display: none;'><a href="settlement.html#properties">properties</a></li><li data-type='method' style='display: none;'><a href="settlement.html#raise_espionage">raise_espionage</a></li><li data-type='method' style='display: none;'><a href="settlement.html#raise_faith">raise_faith</a></li><li data-type='method' style='display: none;'><a href="settlement.html#raise_fame">raise_fame</a></li><li data-type='method' style='display: none;'><a href="settlement.html#raise_influence">raise_influence</a></li><li data-type='method' style='display: none;'><a href="settlement.html#raise_prestige">raise_prestige</a></li><li data-type='method' style='display: none;'><a href="settlement.html#raise_research">raise_research</a></li><li data-type='method' style='display: none;'><a href="settlement.html#recruit_mercenary_army">recruit_mercenary_army</a></li><li data-type='method' style='display: none;'><a href="settlement.html#recruit_ship">recruit_ship</a></li><li data-type='method' style='display: none;'><a href="settlement.html#recruit_soldier">recruit_soldier</a></li><li data-type='method' style='display: none;'><a href="settlement.html#refresh_heroes">refresh_heroes</a></li><li data-type='method' style='display: none;'><a href="settlement.html#release_mercenaries">release_mercenaries</a></li><li data-type='method' style='display: none;'><a href="settlement.html#release_mercenary">release_mercenary</a></li><li data-type='method' style='display: none;'><a href="settlement.html#religion">religion</a></li><li data-type='method' style='display: none;'><a href="settlement.html#remove_from_exports">remove_from_exports</a></li><li data-type='method' style='display: none;'><a href="settlement.html#remove_from_imports">remove_from_imports</a></li><li data-type='method' style='display: none;'><a href="settlement.html#remove_resource">remove_resource</a></li><li data-type='method' style='display: none;'><a href="settlement.html#remove_resources">remove_resources</a></li><li data-type='method' style='display: none;'><a href="settlement.html#rename">rename</a></li><li data-type='method' style='display: none;'><a href="settlement.html#research">research</a></li><li data-type='method' style='display: none;'><a href="settlement.html#reset_espionage">reset_espionage</a></li><li data-type='method' style='display: none;'><a href="settlement.html#reset_faith">reset_faith</a></li><li data-type='method' style='display: none;'><a href="settlement.html#reset_fame">reset_fame</a></li><li data-type='method' style='display: none;'><a href="settlement.html#reset_influence">reset_influence</a></li><li data-type='method' style='display: none;'><a href="settlement.html#reset_prestige">reset_prestige</a></li><li data-type='method' style='display: none;'><a href="settlement.html#reset_research">reset_research</a></li><li data-type='method' style='display: none;'><a href="settlement.html#reset_trades">reset_trades</a></li><li data-type='method' style='display: none;'><a href="settlement.html#ruler">ruler</a></li><li data-type='method' style='display: none;'><a href="settlement.html#sell_to_settlement">sell_to_settlement</a></li><li data-type='method' style='display: none;'><a href="settlement.html#set_army">set_army</a></li><li data-type='method' style='display: none;'><a href="settlement.html#set_influence">set_influence</a></li><li data-type='method' style='display: none;'><a href="settlement.html#set_navy">set_navy</a></li><li data-type='method' style='display: none;'><a href="settlement.html#set_resources">set_resources</a></li><li data-type='method' style='display: none;'><a href="settlement.html#set_trades">set_trades</a></li><li data-type='method' style='display: none;'><a href="settlement.html#setup_initial_buildings">setup_initial_buildings</a></li><li data-type='method' style='display: none;'><a href="settlement.html#split_army">split_army</a></li><li data-type='method' style='display: none;'><a href="settlement.html#split_navy">split_navy</a></li><li data-type='method' style='display: none;'><a href="settlement.html#status">status</a></li><li data-type='method' style='display: none;'><a href="settlement.html#storage">storage</a></li><li data-type='method' style='display: none;'><a href="settlement.html#to_camp">to_camp</a></li><li data-type='method' style='display: none;'><a href="settlement.html#to_city">to_city</a></li><li data-type='method' style='display: none;'><a href="settlement.html#to_metropolis">to_metropolis</a></li><li data-type='method' style='display: none;'><a href="settlement.html#to_village">to_village</a></li><li data-type='method' style='display: none;'><a href="settlement.html#waterside">waterside</a></li></ul></li><li><a href="ui.html">ui</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui.html#.building_panel_template">building_panel_template</a></li><li data-type='method' style='display: none;'><a href="ui.html#.campaign_panel_template">campaign_panel_template</a></li><li data-type='method' style='display: none;'><a href="ui.html#.generic_panel_template">generic_panel_template</a></li><li data-type='method' style='display: none;'><a href="ui.html#.window_about_section">window_about_section</a></li><li data-type='method' style='display: none;'><a href="ui.html#army_img">army_img</a></li><li data-type='method' style='display: none;'><a href="ui.html#army_list">army_list</a></li><li data-type='method' style='display: none;'><a href="ui.html#build_main">build_main</a></li><li data-type='method' style='display: none;'><a href="ui.html#building_element">building_element</a></li><li data-type='method' style='display: none;'><a href="ui.html#building_panel">building_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#chance_panel">chance_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#check_storage">check_storage</a></li><li data-type='method' style='display: none;'><a href="ui.html#citymap_scrollto_building">citymap_scrollto_building</a></li><li data-type='method' style='display: none;'><a href="ui.html#close_panel">close_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui.html#cost_panel">cost_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#error">error</a></li><li data-type='method' style='display: none;'><a href="ui.html#get_cell_middle">get_cell_middle</a></li><li data-type='method' style='display: none;'><a href="ui.html#get_cell_middle_coords">get_cell_middle_coords</a></li><li data-type='method' style='display: none;'><a href="ui.html#get_panel">get_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#get_panels">get_panels</a></li><li data-type='method' style='display: none;'><a href="ui.html#get_random_color">get_random_color</a></li><li data-type='method' style='display: none;'><a href="ui.html#hide_loader">hide_loader</a></li><li data-type='method' style='display: none;'><a href="ui.html#item_tooltip">item_tooltip</a></li><li data-type='method' style='display: none;'><a href="ui.html#level_panel">level_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#log">log</a></li><li data-type='method' style='display: none;'><a href="ui.html#materials_panel">materials_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#navy_img">navy_img</a></li><li data-type='method' style='display: none;'><a href="ui.html#navy_list">navy_list</a></li><li data-type='method' style='display: none;'><a href="ui.html#normal_panel">normal_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#notify">notify</a></li><li data-type='method' style='display: none;'><a href="ui.html#open_modal">open_modal</a></li><li data-type='method' style='display: none;'><a href="ui.html#open_panel">open_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#open_window">open_window</a></li><li data-type='method' style='display: none;'><a href="ui.html#panel_btn">panel_btn</a></li><li data-type='method' style='display: none;'><a href="ui.html#panel_exists">panel_exists</a></li><li data-type='method' style='display: none;'><a href="ui.html#production_panel">production_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#progress">progress</a></li><li data-type='method' style='display: none;'><a href="ui.html#refresh">refresh</a></li><li data-type='method' style='display: none;'><a href="ui.html#refresh_panels">refresh_panels</a></li><li data-type='method' style='display: none;'><a href="ui.html#refresh_toolbar">refresh_toolbar</a></li><li data-type='method' style='display: none;'><a href="ui.html#refresh_ui">refresh_ui</a></li><li data-type='method' style='display: none;'><a href="ui.html#requires_panel">requires_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#resize">resize</a></li><li data-type='method' style='display: none;'><a href="ui.html#resource_small_img">resource_small_img</a></li><li data-type='method' style='display: none;'><a href="ui.html#resource_storage_el">resource_storage_el</a></li><li data-type='method' style='display: none;'><a href="ui.html#resource_storage_small_el">resource_storage_small_el</a></li><li data-type='method' style='display: none;'><a href="ui.html#show_loader">show_loader</a></li><li data-type='method' style='display: none;'><a href="ui.html#storage_panel">storage_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#tabs">tabs</a></li><li data-type='method' style='display: none;'><a href="ui.html#tax_panel">tax_panel</a></li><li data-type='method' style='display: none;'><a href="ui.html#trades_list">trades_list</a></li><li data-type='method' style='display: none;'><a href="ui.html#window_exists">window_exists</a></li><li data-type='method' style='display: none;'><a href="ui.html#worldmap_scrollto">worldmap_scrollto</a></li></ul></li><li><a href="ui_modal.html">ui_modal</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_modal.html#alert">alert</a></li><li data-type='method' style='display: none;'><a href="ui_modal.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_modal.html#on_click">on_click</a></li></ul></li><li><a href="ui_panel.html">ui_panel</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_academy.html">ui_panel_academy</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_academy.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_academy.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_army.html">ui_panel_army</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_army.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_army.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_barracks.html">ui_panel_barracks</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_barracks.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_barracks.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_building.html">ui_panel_building</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_building.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_building.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_buildings.html">ui_panel_buildings</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_buildings.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_buildings.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_campaign.html">ui_panel_campaign</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_campaign.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_campaign.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_church.html">ui_panel_church</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_church.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_church.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_council.html">ui_panel_council</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_council.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_council.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_debug.html">ui_panel_debug</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_debug.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_debug.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_embassy.html">ui_panel_embassy</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_embassy.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_embassy.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_help.html">ui_panel_help</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_help.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_help.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_new_army.html">ui_panel_new_army</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_new_army.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_new_army.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_new_caravan.html">ui_panel_new_caravan</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_new_caravan.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_new_caravan.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_new_scout.html">ui_panel_new_scout</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_new_scout.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_new_scout.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_new_spy.html">ui_panel_new_spy</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_new_spy.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_new_spy.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_place.html">ui_panel_place</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_place.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_place.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_ranks.html">ui_panel_ranks</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_ranks.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_ranks.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_settlement.html">ui_panel_settlement</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_settlement.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_settlement.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_shipyard.html">ui_panel_shipyard</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_shipyard.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_shipyard.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_storage.html">ui_panel_storage</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_storage.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_storage.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_tavern.html">ui_panel_tavern</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_tavern.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_tavern.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_trades.html">ui_panel_trades</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_trades.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_trades.html#destroy">destroy</a></li></ul></li><li><a href="ui_panel_world.html">ui_panel_world</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_panel_world.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_panel_world.html#destroy">destroy</a></li></ul></li><li><a href="ui_window.html">ui_window</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_window.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_window.html#destroy">destroy</a></li></ul></li><li><a href="ui_window_battle.html">ui_window_battle</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_window_battle.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_window_battle.html#destroy">destroy</a></li></ul></li><li><a href="ui_window_error.html">ui_window_error</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_window_error.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_window_error.html#destroy">destroy</a></li></ul></li><li><a href="ui_window_options.html">ui_window_options</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_window_options.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_window_options.html#destroy">destroy</a></li></ul></li><li><a href="ui_window_signin.html">ui_window_signin</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_window_signin.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_window_signin.html#destroy">destroy</a></li></ul></li><li><a href="ui_window_signup.html">ui_window_signup</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ui_window_signup.html#core">core</a></li><li data-type='method' style='display: none;'><a href="ui_window_signup.html#destroy">destroy</a></li></ul></li><li><a href="world.html">world</a><ul class='methods'><li data-type='method' style='display: none;'><a href="world.html#add_place">add_place</a></li><li data-type='method' style='display: none;'><a href="world.html#add_settlement">add_settlement</a></li><li data-type='method' style='display: none;'><a href="world.html#calc_neighbours">calc_neighbours</a></li><li data-type='method' style='display: none;'><a href="world.html#core">core</a></li><li data-type='method' style='display: none;'><a href="world.html#draw">draw</a></li><li data-type='method' style='display: none;'><a href="world.html#get_climate_from_terrain">get_climate_from_terrain</a></li><li data-type='method' style='display: none;'><a href="world.html#get_distance">get_distance</a></li><li data-type='method' style='display: none;'><a href="world.html#get_distance_in_days">get_distance_in_days</a></li><li data-type='method' style='display: none;'><a href="world.html#get_hex">get_hex</a></li><li data-type='method' style='display: none;'><a href="world.html#get_hex_elevation">get_hex_elevation</a></li><li data-type='method' style='display: none;'><a href="world.html#get_hex_moisture">get_hex_moisture</a></li><li data-type='method' style='display: none;'><a href="world.html#get_hex_terrain">get_hex_terrain</a></li><li data-type='method' style='display: none;'><a href="world.html#get_neighbours">get_neighbours</a></li><li data-type='method' style='display: none;'><a href="world.html#get_random_location">get_random_location</a></li><li data-type='method' style='display: none;'><a href="world.html#get_terrain_from_climate">get_terrain_from_climate</a></li><li data-type='method' style='display: none;'><a href="world.html#hex_is_locked">hex_is_locked</a></li><li data-type='method' style='display: none;'><a href="world.html#hex_is_water">hex_is_water</a></li><li data-type='method' style='display: none;'><a href="world.html#hex_locked_by">hex_locked_by</a></li><li data-type='method' style='display: none;'><a href="world.html#lock_hex">lock_hex</a></li><li data-type='method' style='display: none;'><a href="world.html#properties">properties</a></li><li data-type='method' style='display: none;'><a href="world.html#remove_city">remove_city</a></li><li data-type='method' style='display: none;'><a href="world.html#seed">seed</a></li><li data-type='method' style='display: none;'><a href="world.html#set_hex">set_hex</a></li><li data-type='method' style='display: none;'><a href="world.html#unlock_hex">unlock_hex</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#capitalize">capitalize</a></li><li><a href="global.html#findIndexByHandle">findIndexByHandle</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">objects/core/settlement.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Main Game settlement object.
 * 
 * @param {Object} params
 * @license GPL-3.0-or-later
 * @class settlement
 * @returns {settlement}
 */
class settlement {
	
	/**
	 * Object constructor.
	 * 
	 * @private
	 * @constructor
	 * @returns {settlement}
	 * @param {Object} params
	 */
	constructor (params) {
		this._core = params.core;
		this._properties = {};
		this._status = {};
		this._buildings = [];
		this._army = {};
		this._navy = {};
		this._mercenary = [];
		this.resources = {};
		this._heroes = [];
		this._properties.id = params.properties.id;
		this._properties.name = (typeof params.properties.name !== 'undefined') ? params.properties.name: game.get_random_unique(game.SETTLEMENT_NAMES);
		this._properties.player = (typeof params.properties.player !== 'undefined') ? params.properties.player : false;
		this._properties.level = (typeof params.properties.level !== 'undefined') ? params.properties.level : 1;
		this._properties.religion = (typeof params.properties.religion !== 'undefined') ? params.properties.religion : game.RELIGION_NONE;
		this._properties.nationality = (typeof params.properties.nationality !== 'undefined') ? params.properties.nationality : this.core().get_random_nationality();
		this._properties.type = (typeof params.properties.type !== 'undefined') ? params.properties.type : game.CITY;
		this._properties.ruler = (typeof params.properties.ruler !== 'undefined') ? params.properties.ruler : {
				title: (this._properties.type === game.CAMP) ? 'Warlord' : 'Mayor',
				avatar: game.get_random(1, game.AVATARS),
				personality: (this._properties.type === game.CAMP) ? game.PERSONALITY_WARLORD : this.core().get_random_personality(),
				name: game.get_random_unique(game.NAMES)
			};
		this._properties.icon = (typeof params.properties.icon !== 'undefined') ? params.properties.icon : 1;
		this._properties.waterside = (typeof params.properties.waterside !== 'undefined') ? params.properties.waterside : false;
		this._army = this.load_army(params.army);
		this._mercenary = (typeof params.mercenary !== 'undefined') ? params.mercenary : [];
		this._status = (typeof params.status !== 'undefined') ? params.status : {};
		this._heroes = (typeof params.heroes !== 'undefined') ? params.heroes : [];
		this.resources = (typeof params.resources !== 'undefined') ? params.resources : {};
		this._fill_resources();
		this._location = params.location;
		this._properties.color = (typeof params.properties.color !== 'undefined') ? params.properties.color : this.core().ui().get_random_color();
		this.core().world().add_settlement(this);
		if (this.waterside() === true) {
			this._navy = this.load_navy(params.navy);
		}
		this.trades = (typeof params.trades !== 'undefined') ? params.trades : {
				'imports': {},
				'exports': {}
			};
		if (!this.is_player()) {
			this.resources.fame = this.core().level_to_fame(this.level());
			this.ai = new ai({
				core: this,
				type: this._properties.ruler.personality
			});
		}
		if (!this.is_player()) {
			const terrain = this.core().world().get_hex_terrain({
				x: this._location.x,
				y: this._location.y
			});
			const climate = this.core().world().get_climate_from_terrain(terrain);
			this._properties.climate = game['CLIMATE_' + climate.name.toUpperCase()];
			if (this.is_urban()) {
				this.setup_initial_buildings(this.core().get_buildings_for_settlement(this), true);
			}
		} else {
			this._properties.climate = params.properties.climate;
		}
		this._properties.population = (typeof params.properties.population !== 'undefined') ? params.properties.population : this.level() * game.POPULATION_PER_LEVEL;
		return this;
	}

	/**
	 * Export settlement data.
	 *
	 * @returns {Object}
	 * @public
	 */
	export () {
		const data = {
			properties: this.properties(),
			trades: this.get_trades(),
			resources: this.get_resources(),
			army: this.army(),
			navy: this.navy(),
			buildings: this.export_buildings(),
			mercenary: this.mercenary(),
			heroes: this.heroes(),
			location: this.location()
		};
		if (this.is_player()) {
			data.status = this.status();
		}
		return data;
	}

	/**
	 * Get the settlement properties.
	 *
	 * @public
	 * @returns {Object}
	 */
	properties () {
		return this._properties;
	}

	/**
	 * Get/set if the settlement is waterside (can build ships).
	 * 
	 * @public
	 * @returns {Boolean}
	 */
	waterside (value) {
		if (typeof value !== 'undefined') {
			this._properties.waterside = value;
		}
		return this._properties.waterside;
	}

	/**
	 * Get/set the name of this settlement.
	 * 
	 * @public
	 * @param {String} value
	 * @returns {String}
	 */
	name (value) {
		if (typeof value !== 'undefined') {
			this._properties.name = value;
		}
		return this._properties.name;
	}

	/**
	 * Return a pointer to the game core.
	 * 
	 * @public
	 * @returns {game}
	 */
	core () {
		return this._core;
	}

	/**
	 * Raise the level of this settlement.
	 * 
	 * @public
	 * @returns {settlement}
	 */
	level_up () {
		const level = this.level();
		this.fame(this.core().level_to_fame(level));
		this._properties.level++;
		this._properties.population = this.level() * game.POPULATION_PER_LEVEL;
		this.core().ui().log('The city of ' + this.name() + ' is now level ' + this.level() + '.');
		return this;
	}

	/**
	 * Rename this settlement.
	 * 
	 * @public
	 * @param {String} value
	 * @returns {String}
	 */
	rename (value) {
		return this.name(value);
	}

	/**
	 * Get the rank of this settlement
	 * 
	 * @public
	 * @returns {Object}
	 */
	get_rank () {
		const half_level = Math.round(this.level() / 2);
		const rank = {
			fame: this.fame(),
			prestige: this.prestige(),
			espionage: this.espionage(),
			score: Math.floor((
				(this.fame() / half_level) + (this.prestige() / half_level) + (this.espionage() / half_level)
			) / half_level)
		};
		return rank;
	}
	
	/**
	 * Get/set the ruler object of this settlement.
	 * 
	 * @public
	 * @param {Object} value
	 * @returns {Object}
	 */
	ruler (value) {
		if (typeof value !== 'undefined') {
			this._properties.ruler = value;
		}
		return this._properties.ruler;
	}

	/**
	 * Get/set the level of this settlement.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Number}
	 */
	level (value) {
		if (typeof value !== 'undefined') {
			this._properties.level = value;
		}
		return this._properties.level;
	}

	/**
	 * Get/set the personality of the ruler of this settlement.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Object}
	 */
	personality (value) {
		if (typeof value !== 'undefined') {
			this._properties.ruler.personality = value;
		}
		return {
			id: this._properties.ruler.personality,
			name: game.PERSONALITIES[this._properties.ruler.personality].capitalize()
		};
	}

	/**
	 * Get/set the climate of the area of this settlement.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Object}
	 */
	climate (value) {
		if (typeof value !== 'undefined') {
			this._properties.climate = value;
		}
		return {
			id: this._properties.climate,
			name: game.CLIMATES[this._properties.climate].capitalize()
		};
	}
	
	/**
	 * Get/set the nationality of this settlement.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Object}
	 */
	nationality (value) {
		if (typeof value !== 'undefined') {
			this._properties.nationality = value;
		}
		return {
			id: this._properties.nationality,
			name: game.NATIONS[this._properties.nationality].capitalize()
		};
	}

	/**
	 * Get/set the icon of this settlement.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Number}
	 */
	icon (value) {
		if (typeof value !== 'undefined') {
			this._properties.icon = value;
		}
		return this._properties.icon;
	}

	/**
	 * Get/set the id of this settlement.
	 *
	 * @public
	 * @param {Number} value
	 * @returns {Number}
	 */
	id (value) {
		if (typeof value !== 'undefined') {
			this._properties.id = id;
		}
		return this._properties.id;
	}

	/**
	 * Check if this settlement is a player settlement.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	is_player () {
		return this._properties.player;
	}

	/**
	 * Return the type of this settlement.
	 *
	 * @public
	 * @returns {Number}
	 */
	get_type () {
		return this._properties.type;
	}

	/**
	 * Return the population of this settlement.
	 *
	 * @public
	 * @returns {Number}
	 */
	population (value) {
		if (typeof value !== 'undefined') {
			this._properties.population = value;
		}
		return this._properties.population;
	}

	/**
	 * Check if this settlement is a city.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	is_city () {
		return this._properties.type === game.CITY;
	}

	/**
	 * Check if this settlement is a metropolis.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	is_metropolis () {
		return this._properties.type === game.METROPOLIS;
	}

	/**
	 * Check if this settlement is a camp.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	is_camp () {
		return this._properties.type === game.CAMP;
	}

	/**
	 * Check if this settlement is a village.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	is_village () {
		return this._properties.type === game.VILLAGE;
	}

	/**
	 * Refresh the heroes in the Tavern.
	 *
	 * @public
	 * @returns {settlement}
	 */
	refresh_heroes () {
		if (this.is_building_built('tavern')) {
			// TODO
		}
	}

	/**
	 * Check if the player settlement's nationality and the one passed as parameter nationality are the same.
	 *
	 * @param {String|settlement|Number} settlement
	 * @returns {Boolean}
	 * @public
	 */
	has_same_nationality (settlement) {
		if (typeof settlement === 'object' &amp;&amp; this.nationality().id === settlement.nationality().id) {
			return true;
		} else if (typeof settlement === 'number' || typeof settlement === 'string') {
			const _settlement = this.core().get_settlement(settlement);
			if (typeof _settlement !== 'undefined') {
				if (this.nationality().id === _settlement.nationality().id) {
					return true;
				}
			}
		}
		return false;
	}

	/**
	 * Get/set the heroes of the settlement.
	 *
	 * @public
	 * @returns {Object}
	 */
	heroes (value) {
		if (typeof value !== 'undefined') {
			this._heroes = value;
		}
		return this._heroes;
	}

	/**
	 * Get/set the location of the settlement.
	 *
	 * @public
	 * @param {Object} value
	 * @returns {Object}
	 */
	location (value) {
		if (typeof value !== 'undefined') {
			this._location = value;
		}
		return this._location;
	}

	/**
	 * Change this settlement's type to city.
	 *
	 * @public
	 * @returns {settlement}
	 */
	to_city () {
		this._properties.type = game.CITY;
	}

	/**
	 * Change this settlement's type to village.
	 *
	 * @public
	 * @returns {settlement}
	 */
	to_village () {
		this._properties.type = game.VILLAGE;
	}

	/**
	 * Change this settlement's type to camp.
	 *
	 * @public
	 * @returns {settlement}
	 */
	to_camp () {
		this._properties.type = game.CAMP;
	}

	/**
	 * Change this settlement's type to metropolis.
	 *
	 * @public
	 * @returns {settlement}
	 */
	to_metropolis () {
		this._properties.type = game.METROPOLIS;
	}

	/**
	 * Check if the settlement has soldiers in its army.
	 *
	 * @public
	 * @param {Object} data
	 * @returns {Boolean}
	 */
	has_soldiers (data) {
		const army = this.army();
		for (let item in army) {
			if (army[item] - data[item] &lt; 0) {
				return false;
			}
		}
		return true;
	}

	/**
	 * Adjust costs for the campaign.
	 *
	 * @public
	 * @param {Object} cost
	 * @param {Number} duration
	 * @param {Object} resources
	 * @returns {Object}
	 */
	adjust_campaign_cost (cost, duration, resources) {
		let mission_costs = cost;
		for (let item in mission_costs) {
			if (item === 'coins') {
				mission_costs[item] = Math.ceil(cost[item] * duration);
			} else if (item === 'provisions') {
				mission_costs[item] = Math.ceil((cost[item] * duration) / 4);
			}
		}
		if (typeof resources !== 'undefined') {
			let merged_costs = $.extend({}, resources);
			for (let item in mission_costs) {
				if (merged_costs[item]) {
					merged_costs[item] += mission_costs[item];
				} else {
					merged_costs[item] = mission_costs[item];
				}
			}
			return merged_costs;
		}
		return mission_costs;
	}

	/**
	 * Remove soldiers from the settlement's army (to create another army).
	 *
	 * @public
	 * @param {Object} data
	 * @returns {Boolean}
	 */
	split_army (data) {
		let army = this.army();
		if (this.has_soldiers(data)) {
			for (let item in army) {
				if (army[item] - data[item] >= 0) {
					army[item] = army[item] - data[item];
				} else {
					army[item] = 0;
				}
			}
			return true;
		}
		return false;
	}

	/**
	 * Get the color of the settlement.
	 *
	 * @public
	 * @returns {String}
	 */
	color () {
		return this._properties.color;
	}

	/**
	 * Check if the settlement has ships in its navy.
	 *
	 * @public
	 * @param {Object} data
	 * @returns {Boolean}
	 */
	has_ships (data) {
		let navy = this.navy();
		for (let item in navy) {
			if (navy[item] - data[item] &lt; 0) {
				return false;
			}
		}
		return true;
	}

	/**
	 * Remove ships from the settlement's navy (to create another navy).
	 *
	 * @public
	 * @param {Object} data
	 * @returns {Boolean}
	 */
	split_navy (data) {
		let navy = this.navy();
		if (this.has_ships(data)) {
			for (let item in navy) {
				if (navy[item] - data[item] >= 0) {
					navy[item] = navy[item] - data[item];
				} else {
					navy[item] = 0;
				}
			}
			return true;
		}
		return false;
	}

	/**
	 * Return the number of the ships in this settlement's navy.
	 * 
	 * @public
	 * @param {Object} navy
	 * @returns {Object}
	 */
	num_ships (navy) {
		let total = 0;
		if (typeof navy === 'undefined') {
			navy = this._navy;
		}
		for (let item in navy) {
			if (typeof navy[item] !== 'undefined') {
				total = total + navy[item];
			}
		}
		return total;
	}

	/**
	 * Return the number of the soldiers in this settlement's army.
	 * 
	 * @public
	 * @param {Object} army
	 * @returns {Object}
	 */
	num_soldiers (army) {
		let total = 0;
		if (typeof army === 'undefined') {
			army = this._army;
		}
		for (let item in army) {
			if (typeof army[item] !== 'undefined') {
				total += army[item];
			}
		}
		return total;
	}

	/**
	 * Merge two armies.
	 *
	 * @public
	 * @param {Object} army
	 */
	merge_army (army) {
		const _army = this.army();
		let merged_army = $.extend({}, _army);
		for (let item in army) {
			if (merged_army[item]) {
				merged_army[item] += army[item];
			} else {
				merged_army[item] = army[item];
			}
		}
		this._army = merged_army;
	}

	/**
	 * Merge two navies.
	 *
	 * @public
	 * @param {Object} navy
	 */
	merge_navy (navy) {
		const _navy = this.navy();
		let merged_navy = $.extend({}, _navy);
		for (let item in navy) {
			if (merged_navy[item]) {
				merged_navy[item] += navy[item];
			} else {
				merged_navy[item] = navy[item];
			}
		}
		this._navy = merged_navy;
	}

	/**
	 * Method for the setup of the settlement's army.
	 *
	 * @public
	 * @param {Object} params
	 * @returns {Object}
	 */
	load_army (params) {
		let army = {};
		for (let item in game.SOLDIERS) {
			if (typeof params !== 'undefined' &amp;&amp; typeof params[item] !== 'undefined') {
				army[item] = params[item];
			} else {
				army[item] = 0;
			}
		}
		return army;
	}

	/**
	 * Internal method for the initial setup of the settlement's navy.
	 *
	 * @private
	 * @param {Object} params
	 * @returns {Object}
	 */
	load_navy (params) {
		let navy = {};
		for (let item in game.SHIPS) {
			if (typeof params !== 'undefined' &amp;&amp; typeof params[item] !== 'undefined') {
				navy[item] = params[item];
			} else {
				navy[item] = 0;
			}
		}
		return navy;
	}

	/**
	 * Get the list of settlement mercenary armies.
	 *
	 * @public
	 * @param {Array} value
	 * @returns {Array}
	 */
	mercenary (value) {
		if (typeof value !== 'undefined') {
			this._mercenary = value;
		}
		return this._mercenary;
	}

	/**
	 * Check if this settlement can build ships.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	can_build_ships () {
		return this.is_building_built('shipyard');
	}

	/**
	 * Check if this settlement can recruit soldiers.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	can_recruit_soldiers () {
		return this.is_building_built('barracks');
	}

	/**
	 * Recruit a soldier for the settlement's army.
	 * 
	 * @public
	 * @param {String} name
	 * @returns {Boolean}
	 */
	recruit_mercenary_army (name) {
		for (let i = 0; i &lt; game.MERCENARIES.length; i++) {
			if (name === game.MERCENARIES[i].handle) {
				const price = game.MERCENARIES[i].cost;
				if (this.dec_coins(price) === false) {
					return false;
				}
				const army = {
					id: i,
					handle: name,
					army: {}
				};
				for (let item in game.SOLDIERS) {
					if (typeof game.MERCENARIES[i].army[item] !== 'undefined') {
						army.army[item] = game.MERCENARIES[i].army[item];
					} else {
						army.army[item] = 0;
					}
				}
				this._mercenary.push(army);
				if (this.is_player()) {
					this.core().ui().notify('The mercenaries of the ' + game.MERCENARIES[i].name + ' are now available for skirmish missions for the duration of one year.', 'Mercenaries recruited.');
				}
				this.core().ui().log('game', 'The city of ' + this.name() + ' hired the mercenaries of ' + game.MERCENARIES[i].name + '.');
				this.core().save_and_refresh();
				return true;
			}
		}
		return false;
	}

	/**
	 * Construct a ship for the settlement's navy.
	 * 
	 * @public
	 * @param {String} ship_name
	 * @returns {Boolean}
	 */
	recruit_ship (ship_name) {
		if (typeof this._navy[ship_name] !== 'undefined' &amp;&amp; this._navy[ship_name] !== null ) {
			this._navy[ship_name] = this._navy[ship_name] + 1;
		} else {
			this._navy[ship_name] = 1;
		}
		if (this.is_player()) {
			this.core().save_and_refresh();
		}
		return true;
	}

	/**
	 * Recruit a soldier for the settlement's army.
	 * 
	 * @public
	 * @param {String} soldier_name
	 * @returns {Boolean}
	 */
	recruit_soldier (soldier_name) {
		if (typeof this._army[soldier_name] !== 'undefined' &amp;&amp; this._army[soldier_name] !== null ) {
			this._army[soldier_name] = this._army[soldier_name] + 1;
		} else {
			this._army[soldier_name] = 1;
		}
		if (this.is_player()) {
			this.core().save_and_refresh();
		}
		return true;
	}

	/**
	 * Disband a ship from the settlement's navy.
	 * 
	 * @public
	 * @param {String} ship_name
	 * @returns {Boolean}
	 */
	disband_ship (ship_name) {
		if (typeof this._navy[ship_name] === 'undefined') {
			return false;
		} else {
			if (this._navy[ship_name] - 1 >= 0) {
				this._navy[ship_name] = this._navy[ship_name] - 1;
			} else {
				this._navy[ship_name] = 0;
			}
		}
		return true;
	}

	/**
	 * Disband a soldier from the settlement's army.
	 * 
	 * @public
	 * @param {String} soldier_name
	 * @returns {Boolean}
	 */
	disband_soldier (soldier_name) {
		if (typeof this._army[soldier_name] === 'undefined') {
			return false;
		} else {
			if (this._army[soldier_name] - 1 >= 0) {
				this._army[soldier_name] = this._army[soldier_name] - 1;
			} else {
				this._army[soldier_name] = 0;
			}
		}
		return true;
	}

	/**
	 * Set the navy of the settlement.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {settlement}
	 */
	set_navy (value) {
		this._navy = value;
		return this;
	}

	/**
	 * Set the soldiers of the settlement.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {settlement}
	 */
	set_army (value) {
		this._army = value;
		return this;
	}

	/**
	 * Release all the mercenary armies.
	 * 
	 * @public
	 * @returns {settlement}
	 */
	release_mercenaries () {
		this._mercenary = [];
		return this;
	}

	/**
	 * Get the total number of soldiers available in this settlement.
	 * 
	 * @public
	 * @returns {Number}
	 */
	army () {
		return this._army;
	}
		
	/**
	 * Get the total number of ships available in this settlement.
	 * 
	 * @public
	 * @returns {Number}
	 */
	navy () {
		return this._navy;
	}

	/**
	 * Check if this mercenary army has already been recruited.
	 * 
	 * @public
	 * @param {String} handle
	 * @returns {Boolean}
	 */
	is_mercenary_recruited (handle) {
		for (let i = 0; i &lt; this._mercenary.length; i++) {
			if (typeof this._mercenary[i] !== 'undefined') {
				if (this._mercenary[i].handle === handle) {
					return true;
				}
			}
		}
		return false;
	}

	/**
	 * Release a recruited mercenary army.
	 *
	 * @public
	 * @param {Number} id
	 * @returns {Boolean}
	 */
	release_mercenary (id) {
		if (typeof this._mercenary[id] !== 'undefined') {
			const mercenary_army_data = game.MERCENARIES[id];
			this._mercenary.splice(id, 1);
			if (this.is_player()) {
				this.core().ui().notify(mercenary_army_data.name + ' has been released from its duties.');
			}
			return true;
		} else {
			return false;
		}
	}

	/**
	 * Get the list of settlement buildings, for export reasons.
	 *
	 * @public
	 * @returns {Array}
	 */
	export_buildings () {
		const buildings_list = [];
		for (let i = 0; i &lt; this._buildings.length; i++) {
			if (typeof this._buildings[i] !== 'undefined') {
				buildings_list.push({
					handle: this._buildings[i].handle,
					level: this._buildings[i].level,
					stopped: this._buildings[i].is_stopped()
				});
			}
		}
		return buildings_list;
	}

	/**
	 * Return a pointer to the specified building in this settlement by the specified
	 * handle.
	 * 
	 * @public
	 * @param {String} handle
	 * @returns {building|Boolean}
	 */
	get_building (handle) {
		const buildings = this.get_buildings();
		if (typeof handle === 'string') {
			for (let i = 0; i &lt; buildings.length; i++) {
				if (typeof buildings[i] !== 'undefined') {
					if (buildings[i].type === handle) {
						return buildings[i];
					}
				}
			}
		}
		return false;
	}

	/**
	 * Internal method for creating a building.
	 *
	 * @private
	 * @param {String|Object} building
	 * @param {Boolean} hidden
	 * returns {Boolean}
	 */
	_build (_building, hidden) {
		hidden = (typeof hidden !== 'undefined') &amp;&amp; hidden === true ? true : false;
		const handle = typeof _building.handle !== 'undefined' ? _building.handle : _building;
		const level = typeof _building.level !== 'undefined' ? _building.level : 1;
		const stopped = typeof _building.stopped !== 'undefined' ? _building.stopped : false;
		const building_data = this.get_building_data(handle);
		if (building_data) {
			if (level > 1) {
				building_data.level = level;
			}
			let new_building = new building({
				settlement: this,
				type: handle,
				data: building_data,
				hidden,
				stopped
			});
			this._buildings.push(new_building);
			return true;
		}
		return false;
	}

	/**
	 * Internal function for building the specified buildings, bypassing
	 * the requirements.
	 * 
	 * @public
	 * @param {String|Object} building_type
	 * @param {Boolean} hidden
	 * @returns {Boolean}
	 */
	setup_initial_buildings (building_type, hidden) {
		if (typeof building_type === 'object') {
			for (let i = 0; i &lt; building_type.length; i++) {
				this._build(building_type[i], hidden);
			}
			return true;
		} else {
			this._build(building_type, hidden);
			return true;
		}
	}

	/**
	 * Get the building data.
	 *
	 * @public
	 * @param {String} handle
	 * @returns {Object|Boolean}
	 */
	get_building_data (handle) {
		const id = game.BUILDINGS.findIndexByHandle(handle);
		if (id !== false) {
			return game.BUILDINGS[id];
		}
		return false;
	}

	/**
	 * Build the specified building.
	 * 
	 * @public
	 * @param {String} building_type
	 * @returns {building|Boolean}
	 */
	build (building_type) {
		const building_data = this.get_building_data(building_type);
		if (building_data) {
			if ((typeof building_data.requires.settlement_level !== 'undefined') &amp;&amp; (this._properties.level &lt; building_data.requires.settlement_level)) {
				if (this.is_player()) {
					this.core().ui().error('Your city level is too low to construct this building.');
				}
				return false;
			}
			if ((typeof building_data.requires.climate !== 'undefined') &amp;&amp; ($.inArray(this.climate().id, building_data.requires.climate) === -1)) {
				if (this.is_player()) {
					this.core().ui().error('Your city lacks the required fertility and climate to construct this building.');
				}
				return false;
			}
			if ((typeof building_data.requires.research !== 'undefined') &amp;&amp; (!this.core().has_research(building_data.requires.research))) {
				if (this.is_player()) {
					this.core().ui().error('Your city is missing the `' + this.core().get_research_config_data(building_data.requires.research).name + '` research needed to construct this building.');
				}
				return false;
			}
			if (typeof building_data.requires.buildings !== 'undefined') {
				const required = building_data.requires.buildings;
				for (let item in required) {
					if (!this.is_building_built(item, required[item])) {
						const _z = this.core().get_building_config_data(item);
						if (_z) {
							if (this.is_player()) {
								this.core().ui().error('You don`t have the required level ' + required[item] + ' ' + _z.name + '.');
							}
						}
						return false;
					}
				}
			}
			if (!this.has_resources(building_data.cost)) {
				if (this.is_player()) {
					this.core().ui().error('You don`t have enough resources to construct this building.');
				}
				return false;
			}
			if (!this.remove_resources(building_data.cost)) {
				return galse;
			}
			const _building = new building({
				settlement: this,
				type: building_type,
				data: building_data
			});
			this._buildings.push(_building);
			this.raise_prestige();
			if (this.is_player()) {
				this.core().save_and_refresh();
				this.core().ui().citymap_scrollto_building(_building);
				this.core().ui().notify('A new ' + _building.name + ' was just constructed in your city.');
				$('.tips').tipsy({
					gravity: $.fn.tipsy.autoNS,
					html: true
				});
			}
			return _building;
		}
		return false;
	}

	/**
	 * Check if the specified building is already built.
	 * 
	 * @public
	 * @param {String} handle
	 * @param {Number} level
	 * @returns {Boolean}
	 */
	is_building_built (handle, level) {
		if (typeof level === 'undefined') {
			level = 1;
		}
		const buildings = this.get_buildings();
		for (let i = 0; i &lt; buildings.length; i++) {
			if (typeof buildings[i] !== 'undefined') {
				if (buildings[i].type === handle &amp;&amp; buildings[i].level >= level) {
					return true;
				}
			}
		}
		return false;
	}

	/**
	 * Get the list of all the buildings in this settlement.
	 * 
	 * @public
	 * @returns {Array}
	 */
	get_buildings () {
		return this._buildings;
	}

	/**
	 * Perform diplomacy missions.
	 *
	 * @public
	 * @param {Number|settlement} settlement
	 * @param {Number} mode
	 * @returns {Boolean}
	 */
	diplomacy (settlement, mode) {
		if (typeof settlement === 'object') {
			settlement = settlement.id();
		}
		if (typeof settlement === 'number') {
			this._status[settlement].status = mode;
			if (mode === game.DIPLOMACY_WAR) {
				this.core().do_achievement('declarewar');
				this.reset_influence(settlement);
			} else if (mode === game.DIPLOMACY_ALLIANCE) {
				this.core().do_achievement('gotyourback');
				this.set_influence(settlement, game.MAX_INFLUENCE_VALUE);
			} else if (mode === game.DIPLOMACY_PACT) {
				this.core().do_achievement('pactish');
				this.set_influence(settlement, Math.ceil(game.MAX_INFLUENCE_VALUE / 2));
			} else if (mode === game.DIPLOMACY_CEASE_FIRE) {
				this.set_influence(settlement, Math.ceil(game.MAX_INFLUENCE_VALUE / 4));
			} else if (mode === game.DIPLOMACY_VASSAL) {
				this.core().do_achievement('youaremine');
				this.set_influence(settlement, game.MAX_INFLUENCE_VALUE);
			}
			this.core().save_and_refresh();
			return true;
		}
		return false;
	}

	/**
	 * Get/set the diplomatic status with another settlement.
	 *
	 * @public
	 * @param {Number} settlement
	 * @param {Number} value
	 * @returns {Number}
	 */
	status (settlement, value) {
		if (typeof value !== 'undefined') {
			this._status[settlement] = value;
		}
		if (typeof settlement !== 'undefined') {
			return this._status[settlement];
		} else {
			return this._status;
		}
	}

	/**
	 * Check if this settlement can recruit heroes.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	can_recruit_heroes () {
		return this.is_building_built('tavern');
	}

	/**
	 * Check if this settlement can conduct diplomatic missions.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	can_diplomacy () {
		return this.is_building_built('embassy');
	}

	/**
	 * Returns the influenceof this settlement with a specific settlement.
	 * 
	 * @public
	 * @param {String} settlement
	 * @returns {Number}
	 */
	get_influence_with_settlement (settlement) {
		if (typeof settlement === 'number') {
			return this._status[settlement].influence;
		} else if (typeof settlement === 'object') {
			return this._status[settlement.id()].influence;
		} else if (typeof settlement === 'string') {
			return this._status[this.core().get_settlement(settlement)].influence;
		}
	}

	/**
	 * Decrease the influence of this settlement.
	 * 
	 * @public
	 * @param {String} settlement
	 * @param {Number} value
	 * @returns {Number}
	 */
	lower_influence (settlement, value) {
		if (typeof value === 'undefined') {
			value = 1;
		}
		return this.set_influence(settlement, this.get_influence_with_settlement(settlement) - value);
	}

	/**
	 * Set the influence with the specified settlement to this value.
	 *
	 * @public
	 * @param {settlement} settlement
	 * @param {Number} value
	 * @returns {Number}
	 */
	set_influence (settlement, value) {
		if (typeof settlement === 'object') {
			settlement = settlement.id();
		} else if (typeof settlement === 'string') {
			settlement = this.core().get_settlement(settlement);
		}
		if (value &lt; game.MIN_INFLUENCE_VALUE || this._status[settlement].influence &lt; game.MIN_INFLUENCE_VALUE) {
			this._status[settlement].influence = game.MIN_INFLUENCE_VALUE;
		} else {
			this._status[settlement].influence = value;
		}
		if (this._status[settlement].influence >= game.MAX_INFLUENCE_VALUE) {
			this._status[settlement].influence = game.MAX_INFLUENCE_VALUE;
		}
		return this.get_influence_with_settlement(settlement);
	}

	/**
	 * Increase the influence of this settlement.
	 * 
	 * @public
	 * @param {String} settlement
	 * @param {Number} value
	 * @returns {Number}
	 */
	raise_influence (settlement, value) {
		if (typeof value === 'undefined') {
			value = 1;
		}
		return this.set_influence(settlement, this.get_influence_with_settlement(settlement) + value);
	}

	/**
	 * Reset the influence of this settlement.
	 * 
	 * @param {Number} s_id
	 * @returns {settlement}
	 * @public
	 */
	reset_influence (s_id) {
		this.set_influence(s_id, game.MIN_INFLUENCE_VALUE);
		return this;
	}
		
	/**
	 * Return the diplomacy status of this settlement.
	 * 
	 * @public
	 * @returns {Object}
	 */
	get_diplomacy_status (settlement) {
		return {
			id: this._status[settlement].status,
			name: game.DIPLOMACIES[this._status[settlement].status].capitalize()
		};
	}

	/**
	 * Raise the espionage of this settlement by the specified amount.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Number}
	 */
	raise_espionage (value) {
		if (typeof value === 'undefined') {
			value = 1;
		}
		return this.espionage(this.espionage() + value);
	}

	/**
	 * Lower the espionage of this settlement by the specified amount.
	 * 
	 * @public
	 * @param {Number} amount
	 * @returns {Number}
	 */
	lower_espionage (value) {
		if (typeof value === 'undefined') {
			value = 1;
		}
		return this.espionage(this.espionage() - value);
	}

	/**
	 * Reset the espionage of this settlement.
	 * 
	 * @returns {Number}
	 * @public
	 */
	reset_espionage () {
		return this.espionage(game.MIN_ESPIONAGE_VALUE);
	}

	/**
	 * Get/set the espionage of this settlement.
	 * 
	 * @public
	 * @returns {Number}
	 * @param {Number} value
	 */
	espionage (value) {
		if (typeof value !== 'undefined') {
			if (value &lt; game.MIN_ESPIONAGE_VALUE || this.resources.espionage &lt; game.MIN_ESPIONAGE_VALUE) {
				this.resources.espionage = game.MIN_ESPIONAGE_VALUE;
			} else {
				this.resources.espionage = value;
			}
			if (this.resources.espionage >= game.MAX_ESPIONAGE_VALUE) {
				this.resources.espionage = game.MAX_ESPIONAGE_VALUE;
			}
		}
		return this.resources.espionage;
	}

	/**
	 * Increase this settlement's fame by the specified amount.
	 * 
	 * @public
	 * @param {Number} amount
	 * @returns {Number}
	 */
	raise_fame (amount) {
		if (typeof amount === 'undefined') {
			amount = 1;
		}
		return this.fame(this.fame() + amount);
	}

	/**
	 * Decrease this settlement's fame by the specified amount.
	 * 
	 * @public
	 * @param {Number} amount
	 * @returns {Number}
	 */
	lower_fame (amount) {
		if (typeof amount === 'undefined') {
			amount = 1;
		}
		return this.fame(this.fame() - amount);
	}

	/**
	 * Get/set this settlement's fame.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Number}
	 */
	fame (value) {
		if (typeof value !== 'undefined') {
			if (value &lt; game.MIN_FAME_VALUE || this.resources.fame &lt; game.MIN_FAME_VALUE) {
				this.resources.fame = game.MIN_FAME_VALUE;
			} else {
				this.resources.fame = value;
			}
			return value;
		} else {
			return this.resources.fame;
		}
	}

	/**
	 * Reset the fame of this settlement.
	 * 
	 * @returns {Number}
	 * @public
	 */
	reset_fame () {
		return this.fame(game.MIN_FAME_VALUE);
	}

	/**
	 * Raise the prestige of this settlement by the specified amount.
	 * 
	 * @public
	 * @param {Number} amount
	 * @returns {Number}
	 */
	raise_prestige (amount) {
		if (typeof amount === 'undefined') {
			amount = 1;
		}
		return this.prestige(this.prestige() + amount);
	}

	/**
	 * Lower the prestige of this settlement by the specified amount.
	 * 
	 * @public
	 * @param {Number} amount
	 * @returns {Number}
	 */
	lower_prestige (amount) {
		if (typeof amount === 'undefined') {
			amount = 1;
		}
		return this.prestige(this.prestige() - amount);
	}

	/**
	 * Reset the prestige of this settlement.
	 * 
	 * @returns {Number}
	 * @public
	 */
	reset_prestige () {
		return this.prestige(game.MIN_PRESTIGE_VALUE);
	}

	/**
	 * Get/set the prestige of this settlement.
	 * 
	 * @public
	 * @returns {Number}
	 * @param {Number} value
	 */
	prestige (value) {
		if (typeof value !== 'undefined') {
			if (value &lt; game.MIN_PRESTIGE_VALUE || this.resources.prestige &lt; game.MIN_PRESTIGE_VALUE) {
				this.resources.prestige = game.MIN_PRESTIGE_VALUE;
			} else {
				this.resources.prestige = value;
			}
			if (this.resources.prestige >= game.MAX_PRESTIGE_VALUE) {
				this.resources.prestige = game.MAX_PRESTIGE_VALUE;
			}
		}
		return this.resources.prestige;
	}

	/**
	 * Change religion of your settlement.
	 *
	 * @public
	 * @param {Number|String} id
	 * @returns {Boolean}
	 */
	change_religion (id) {
		if (this.faith() !== game.MAX_FAITH_VALUE &amp;&amp; id !== 0) {
			if (this.is_player()) {
				this.core().ui().error('You don`t have enough faith to switch religions.');
			}
			return false;
		}
		if ((typeof id === 'number' &amp;&amp; this.religion().id === id) || (typeof id === 'string' &amp;&amp; this.religion().name === id)) {
			if (this.is_player()) {
				this.core().ui().error('You cannot switch religion to your already existing one.');
			}
			return false;
		}
		if (!this.religion(id)) {
			if (this.is_player()) {
				this.core().ui().error('Unable to switch religion to the specified one.');
			}
			return false;
		}
		this.reset_faith();
		this.refresh_heroes();
		if (this.is_player()) {
			this.core().ui().notify('Your settlement`s new religion is &lt;strong>' + this.religion().name + '&lt;/strong>', 'Religion Adopted', false, game.NOTIFY_RELIGION);
		}
		this.core().save_and_refresh();
		return true;
	}

	/**
	 * Get/set the religion of this settlement.
	 * 
	 * @public
	 * @returns {Object}
	 */
	religion (value) {
		if (typeof value !== 'undefined') {
			if (typeof value === 'number') {
				this._properties.religion = value;
				return true;
			} else if (typeof value === 'string') {
				const pos = $.inArray(value, game.RELIGIONS);
				if (pos !== -1) {
					this._properties.religion = pos;
					return true;
				}
			}
		}
		return {
			id: this._properties.religion,
			name: game.RELIGIONS[this._properties.religion].capitalize()
		};
	}

	/**
	 * Raise the faith of this settlement by the specified amount.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Number}
	 */
	raise_faith (value) {
		if (typeof value === 'undefined') {
			value = 1;
		}
		return this.faith(this.faith() + value);
	}

	/**
	 * Lower the faith of this settlement by the specified amount.
	 * 
	 * @public
	 * @param {Number} amount
	 * @returns {Number}
	 */
	lower_faith (value) {
		if (typeof value === 'undefined') {
			value = 1;
		}
		return this.faith(this.faith() - value);
	}

	/**
	 * Reset the faith of this settlement.
	 * 
	 * @returns {Number}
	 * @public
	 */
	reset_faith () {
		return this.faith(game.MIN_FAITH_VALUE);
	}

	/**
	 * Get/set the faith of this settlement.
	 * 
	 * @public
	 * @returns {Number}
	 * @param {Number} value
	 */
	faith (value) {
		if (typeof value !== 'undefined') {
			if (value &lt; game.MIN_FAITH_VALUE || this.resources.faith &lt; game.MIN_FAITH_VALUE) {
				this.resources.faith = game.MIN_FAITH_VALUE;
			} else {
				this.resources.faith = value;
			}
			if (this.resources.faith >= game.MAX_FAITH_VALUE) {
				this.resources.faith = game.MAX_FAITH_VALUE;
			}
		}
		return this.resources.faith;
	}

	/**
	 * Check if this settlement can recruit soldiers.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	can_research () {
		return this.is_building_built('academy');
	}

	/**
	 * Raise the research of this settlement by the specified amount.
	 * 
	 * @public
	 * @param {Number} amount
	 * @returns {Number}
	 */
	raise_research (amount) {
		if (typeof amount === 'undefined') {
			amount = 1;
		}
		return this.research(this.research() + amount);
	}

	/**
	 * Lower the research of this settlement by the specified amount.
	 * 
	 * @public
	 * @param {Number} amount
	 * @returns {Number}
	 */
	lower_research (amount) {
		if (typeof amount === 'undefined') {
			amount = 1;
		}
		return this.research(this.research() - amount);
	}

	/**
	 * Reset the research of this settlement.
	 * 
	 * @returns {Number}
	 * @public
	 */
	reset_research () {
		return this.research(game.MIN_RESEARCH_VALUE);
	}

	/**
	 * Get/set the research of this settlement.
	 * 
	 * @public
	 * @returns {Number}
	 * @param {Number} value
	 */
	research (value) {
		if (typeof value !== 'undefined') {
			if (value &lt; game.MIN_RESEARCH_VALUE || this.resources.research &lt; game.MIN_RESEARCH_VALUE) {
				this.resources.research = game.MIN_RESEARCH_VALUE;
			} else {
				this.resources.research = value;
			}
			if (this.resources.research >= game.MAX_RESEARCH_VALUE) {
				this.resources.research = game.MAX_RESEARCH_VALUE;
			}
		}
		return this.resources.research;
	}

	/**
	 * Merge resources from a source into settlement's storage.
	 *
	 * @public
	 * @param {Object} resources
	 * @returns {settlement}
	 */
	merge_resources (resources) {
		if (typeof resources !== 'undefined') {
			for (let item in resources) {
				if (!game.is_virtual_resource(item)) {
					this.add_to_storage(item, resources[item]);
				}
			}
		}
		return this;
	}

	/**
	 * Get resources from the settlement's storage as spoils of war.
	 *
	 * @public
	 * @returns {Object}
	 */
	get_spoils () {
		const resources = this.get_resources();
		let tmp_res = Object.keys(resources);
		const spoils = {};
		let resource;
		let random_resource;
		let count = 0;
		while (count &lt; 3) {
			random_resource = tmp_res[Math.floor(Math.random() * tmp_res.length)];
			resource = resources[random_resource];
			if (!game.is_virtual_resource(random_resource)) {
				if (resource > 0) {
					if (this.remove_resource(random_resource, resource)) {
						spoils[random_resource] = resource;
						count++;
					}
				}
			}
		}
		return spoils;
	}

	/**
	 * Increase this settlement's coins by the specified amount.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Number}
	 */
	inc_coins (value) {
		return this.coins(this.coins() + value);
	}
		
	/**
	 * Decrease this settlement's coins by the specified amount.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Number}
	 */
	dec_coins (value) {
		if (!this.has_coins(value)) {
			return false;
		}
		this.coins(this.coins() - value);
		return true;
	}
		
	/**
	 * Get/set the coins of the settlement.
	 * 
	 * @public
	 * @param {Number} value
	 * @returns {Number}
	 */
	coins (value) {
		if (typeof value !== 'undefined') {
			this.resources.coins = value;
		}
		return this.resources.coins;
	}

	/**
	 * Get/set the storage space of this settlement.
	 * 
	 * @public
	 * @param {Object} value
	 * @returns {Object}
	 */
	storage (value) {
		if (typeof value !== 'undefined') {
			this._properties.storage = value;
		}
		let storage = 0;
		for (let item in this.get_resources()) {
			if (!game.is_virtual_resource(item)) {
				storage += this.get_resources()[item];
			}
		}
		return {
			occupied: storage,
			all: this._properties.storage
		};
	}
		
	/**
	 * Adjust the resources according to the settlement owner.
	 *
	 * @private
	 * @returns {settlement}
	 */
	_fill_resources () {
		for (let item in game.RESOURCES) {
			if (typeof this.resources[item] === 'undefined') {
				this.resources[item] = 0;
			}
		}
		return this;
	}

	/**
	 * Add a specified amount of a resource to the storage of this settlement.
	 * 
	 * @public
	 * @param {String} item
	 * @param {Number} amount
	 * @returns {Boolean}
	 */
	add_to_storage (item, amount) {
		if (!game.resource_exists(item)) {
			return false;
		}
		if (!this.has_storage_space_for(item, amount)) {
			return false;
		}
		const res = this.get_resources();
		if (typeof res[item] !== 'undefined') {
			res[item] = res[item] + amount;
		} else {
			res[item] = amount;
		}
		return true;
	}
		
	/**
	 * Check if the settlement has the required coins to create this building.
	 * 
	 * @public
	 * @param {Number} coins
	 * @returns {Boolean}
	 */
	has_coins (coins) {
		if (this.coins() - coins &lt; 0) {
			if (this.is_player()) {
				this.core().ui().error(this.name() + ' doesn`t have enough ' + game.get_resource_name('coins') + '.');
			}
			return false;
		}
		return true;
	}

	/**
	 * Remove the specified resources from the settlement's storage.
	 *
	 * @public
	 * @param {Object} resources
	 * @returns {Boolean}
	 */
	remove_resources (resources) {
		let good = true;
		for (let item in resources) {
			good = this.remove_resource(item, resources[item]);
			if (good === false) {
				return false;
			}
		}
		return true;
	}

	/**
	 * Remove the amount of specified resource from the settlement's storage.
	 *
	 * @public
	 * @param {String} resource
	 * @param {Number} amount
	 * @returns {Boolean}
	 */
	remove_resource (resource, amount) {
		const resources = this.get_resources();
		resources[resource] = resources[resource] - amount;
		if (resources[resource] &lt; 0) {
			resources[resource] = 0;
		}
		return true;
	}

	/**
	 * Check if the settlement has storage space for the amount of specified resource.
	 *
	 * @public
	 * @param {String|Object} resources
	 * @param {Number} amount
	 * @returns {Boolean}
	 */
	has_storage_space_for (resources, amount) {
		let total = 0;
		if (typeof amount === 'undefined') {
			for (let item in resources) {
				if (!game.is_virtual_resource(item)) {
					total += resources[item];
				}
			}
		} else {
			if (!game.is_virtual_resource(resources)) {
				total += amount;
			}
		}
		let storage = this.storage();
		if ((storage.occupied + total) > storage.all) {
			return false;
		}
		return true;
	}

	/**
	 * Check if the settlement is urban.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	is_urban () {
		if (this.is_city() || this.is_metropolis()) {
			return true;
		} else {
			return false;
		}
	}

	/**
	 * Check if the settlement has any of the specified resources.
	 *
	 * @public
	 * @param {Object} resources
	 * @returns {Boolean}
	 */
	has_any_resources (resources) {
		let good = false;
		for (let item in resources) {
			good = this.has_resource(item, resources[item]);
			if (good === true) {
				return item;
			}
		}
		return false;
	}

	/**
	 * Check if the settlement has the specified resources.
	 *
	 * @public
	 * @param {Object} resources
	 * @returns {Boolean}
	 */
	has_resources (resources) {
		let good = true;
		for (let item in resources) {
			good = this.has_resource(item, resources[item]);
			if (good === false) {
				return false;
			}
		}
		return good;
	}

	/**
	 * Check if the settlement has the amount of specified resource.
	 *
	 * @public
	 * @param {String} resource
	 * @param {Number} amount
	 * @returns {Boolean}
	 */
	has_resource (resource, amount) {
		const resources = this.get_resources();
		if (!game.resource_exists(resource)) {
			return false;
		}
		if (resources[resource] - amount &lt; 0) {
			return false;
		}
		return true;
	}

	/**
	 * Get the resources available in this settlement.
	 * 
	 * @public
	 * @returns {Object}
	 */
	get_resources () {
		return this.resources;
	}
		
	/**
	 * Set the resources of the settlement.
	 * 
	 * @public
	 * @param {Object} value
	 * @returns {settlement}
	 */
	set_resources (value) {
		this.resources = value;
		return this;
	}
	
	/**
	 * Check if this settlement can trade resources.
	 *
	 * @public
	 * @returns {Boolean}
	 */
	can_trade () {
		return this.is_building_built('tradingpost');
	}

	/**
	 * Buy the specified goods from a settlement.
	 * 
	 * @public
	 * @param {settlement|String|Number} settlement
	 * @param {String} resource
	 * @param {Number} amount
	 * @param {Boolean} is_auctioneer
	 * @returns {Object|Boolean}
	 */
	buy_from_settlement (settlement, resource, amount, is_auctioneer) {
		if (!game.resource_exists(resource)) {
			if (this.is_player()) {
				this.core().ui().error('The resource you specified does not exist.');
			}
			return false;
		}
		if (this.can_trade()) {
			let _settlement;
			let discount;
			if (typeof settlement === 'string' || typeof settlement === 'number') {
				_settlement = this.core().get_settlement(settlement);
				if (settlement === false) {
					if (this.is_player()) {
						this.core().ui().error('The settlement of &lt;strong>' + settlement + '&lt;/strong> does not exist.');
					}
					return false;
				}
			} else {
				_settlement = settlement;
				settlement = _settlement.name();
			}
			const is_double = this.religion().id === _settlement.religion().id ? true : false;
			const trades = _settlement.get_trades();
			if (trades === null) {
				if (this.is_player()) {
					this.core().ui().error('The settlement of &lt;strong>' + settlement + '&lt;/strong> does not trade any goods.');
				}
				return false;
			}
			if (typeof trades.exports === 'undefined') {
				if (this.is_player()) {
					this.core().ui().error('The settlement of &lt;strong>' + settlement + '&lt;/strong> does not export any goods.');
				}
				return false;
			}
			for (let item in trades.exports) {
				if (item === resource) {
					if (typeof amount === 'undefined') {
						amount = trades.exports[item];
					}
					discount = Math.ceil((game.RESOURCES[item].price * game.TRADES_ADDITION) / 100);
					if (typeof is_auctioneer !== 'undefined' &amp;&amp; is_auctioneer === true) {
						discount = Math.ceil(discount + Math.ceil((game.RESOURCES[item].price * game.AUCTIONEER_DISCOUNT) / 100));
					}
					const price = game.calc_price_plus_discount(amount, item, discount);
					const s_price = game.calc_price(amount, item);
					const item_discount_price = Math.ceil(game.RESOURCES[item].price + discount);
					if (!this.has_storage_space_for(amount)) {
						this.core().ui().error(this.name() + ' does not have enough storage space for &lt;strong>' + amount + '&lt;/strong> ' + game.get_resource_name(item) + '.');
						return false;
					}
					if (this.dec_coins(price) === false) {
						return false;
					}
					if (!_settlement.has_resource(item, amount)) {
						return false;
					}
					if (!_settlement.remove_resource(item, amount)) {
						return false;
					}
					_settlement.inc_coins(s_price);
					this.add_to_storage(item, amount);
					this.remove_from_exports(_settlement, item, amount);
					this.raise_influence(_settlement.id(), (is_double ? game.IMPORT_INFLUENCE * 2 : game.IMPORT_INFLUENCE));
					this.raise_prestige(is_double ? game.IMPORT_PRESTIGE * 2 : game.IMPORT_PRESTIGE);
					this.raise_fame(game.FAME_PER_TRADE);
					this.core().ui().refresh();
					if (this.is_player()) {
						this.core().ui().notify(this.name() + ' bought &lt;strong>' + amount + '&lt;/strong> ' + game.get_resource_name(item) + ' from ' + settlement + ' for &lt;strong>' + item_discount_price + '&lt;/strong> ' + game.get_resource_name('coins') + ' each, for a total of &lt;strong>' + price + '&lt;/strong> ' + game.get_resource_name('coins') + '.', 'World Market');
					}
					return {
						buyer: this.name(),
						amount,
						goods: game.get_resource_name(item),
						seller: settlement,
						price: Math.round(game.RESOURCES[item].price + discount),
						totalPrice: price
					};
				}
			}
			if (this.is_player()) {
				this.core().ui().error('The settlement of &lt;strong>' + settlement + '&lt;/strong> does not export the requested goods.');
			}
		}
		return false;
	}
		
	/**
	 * Perform a trades reset (resets all amounts of resources available
	 * for trade and randomize the amount.
	 * 
	 * @public
	 * @returns {Boolean}
	 */
	reset_trades () {
		const data = this.core().generate_random_resources(false, this.get_type());
		let new_resources = data.resources;
		new_resources.coins = this.resources.coins;
		new_resources.fame = this.resources.fame;
		new_resources.prestige = this.resources.prestige;
		new_resources.espionage = this.resources.espionage;
		new_resources.research = this.resources.research;
		new_resources.faith = this.resources.faith;
		this.resources = new_resources;
		if (this.is_urban()) {
			this.trades = data.trades;
		}
		return true;
	}

	/**
	 * Sell the specified goods to a settlement.
	 * 
	 * @public
	 * @param {settlement|String|Number} settlement
	 * @param {String} resource
	 * @param {Number} amount
	 * @returns {Object|Boolean}
	 */
	sell_to_settlement (settlement, resource, amount) {
		if (!game.resource_exists(resource)) {
			if (this.is_player()) {
				this.core().ui().error('The resource you specified does not exist.');
			}
			return false;
		}
		if (this.can_trade()) {
			let _settlement;
			if (typeof settlement === 'string' || typeof settlement === 'number') {
				_settlement = this.core().get_settlement(settlement);
				if (settlement === false) {
					if (this.is_player()) {
						this.core().ui().error(settlement + ' does not exist.');
					}
					return false;
				}
			} else {
				_settlement = settlement;
			}
			const is_double = this.religion().id === _settlement.religion().id ? true : false;
			const trades = _settlement.get_trades();
			if (trades === null) {
				if (this.is_player()) {
					this.core().ui().error(settlement + ' does not trade any goods.');
				}
				return false;
			}
			if (typeof trades.imports === 'undefined') {
				if (this.is_player()) {
					this.core().ui().error(settlement + ' does not import any goods.');
				}
				return false;
			}
			for (let item in trades.imports) {
				if (item === resource) {
					if (typeof amount === 'undefined') {
						amount = trades.imports[item];
					}
					const discount = Math.ceil((game.RESOURCES[item].price * game.TRADES_DISCOUNT) / 100);
					const price = game.calc_price_minus_discount(amount, item, discount);
					const s_price = game.calc_price(amount, item);
					const item_discount_price = Math.ceil(game.RESOURCES[item].price - discount);
					if (!this.has_resource(item, amount)) {
						this.core().ui().error(this.name() + ' does not have enough ' + game.get_resource_name(item) + ' to sell.');
						return false;
					}
					if (!this.remove_resource(item, amount)) {
						return false;
					}
					this.inc_coins(price);
					if (!_settlement.dec_coins(s_price)) {
						if (this.is_player()) {
							this.core().ui().error(settlement + ' does not have enough ' + game.get_resource_name('coins') + '.');
						}
						return false;
					}
					_settlement.add_to_storage(item, amount);
					this.remove_from_imports(_settlement, item, amount);
					this.raise_influence(_settlement.id(), (is_double ? game.EXPORT_INFLUENCE * 2 : game.EXPORT_INFLUENCE));
					this.raise_prestige(is_double ? game.EXPORT_PRESTIGE * 2 : game.EXPORT_PRESTIGE);
					this.raise_fame(game.FAME_PER_TRADE);
					this.core().ui().refresh();
					if (this.is_player()) {
						this.core().ui().notify(this.name() + ' sold &lt;strong>' + amount + '&lt;/strong> ' + game.get_resource_name(item) + ' to ' + settlement + ' for &lt;strong>' + item_discount_price + '&lt;/strong> ' + game.get_resource_name('coins') + ' each, for a total of &lt;strong>' + price + '&lt;/strong> ' + game.get_resource_name('coins') + '.', 'World Market');
					}
					return {
						seller: this.name(),
						amount,
						goods: game.get_resource_name(item),
						buyer: settlement,
						price: Math.round(game.RESOURCES[item].price - discount),
						totalPrice: price
					};
				}
			}
			if (this.is_player()) {
				this.core().ui().error(settlement + ' does not import the specified goods.');
			}
		}
		return false;
	}
		
	/**
	 * Remove a specified amount of a resource from the trade exports of a settlement.
	 * 
	 * @public
	 * @param {settlement} settlement
	 * @param {String} item
	 * @param {Number} amount
	 * @returns {Boolean}
	 */
	remove_from_exports (settlement, item, amount) {
		settlement.trades.exports[item] = settlement.trades.exports[item] - amount;
		return true;
	}

	/**
	 * Remove a specified amount of a resource from the trade imports of a settlement.
	 * 
	 * @public
	 * @param {settlement} settlement
	 * @param {String} item
	 * @param {Number} amount
	 * @returns {Boolean}
	 */
	remove_from_imports (settlement, item, amount) {
		settlement.trades.imports[item] = settlement.trades.imports[item] - amount;
		return true;
	}

	/**
	 * Get the imports and exports of this settlement.
	 * 
	 * @public
	 * @returns {Object}
	 */
	get_trades () {
		return this.trades;
	}

	/**
	 * Get the exports of this settlement.
	 * 
	 * @public
	 * @returns {Object}
	 */
	get_trades_exports () {
		return this.trades.exports;
	}

	/**
	 * Get the imports of this settlement.
	 * 
	 * @public
	 * @returns {Object}
	 */
	get_trades_imports () {
		return this.trades.imports;
	}

	/**
	 * Format settlement's name into something nicer.
	 *
	 * @public
	 * @returns {String}
	 */
	nice_name () {
		if (this.is_metropolis()) {
			return 'Metropolis of ' + this.name();
		} else if (this.is_city()) {
			return 'City of ' + this.name();
		} else if (this.is_village()) {
			return 'Village of ' + this.name();
		} else if (this.is_camp()) {
			return 'Raider Camp ' + this.name();
		} else {
			return '';
		}
	}

	/**
	 * Set the imports and exports of this settlement.
	 * 
	 * @public
	 * @param {Object} value
	 * @returns {settlement}
	 */
	set_trades (value) {
		this.trades = value;
		return this;
	}
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Wed Jul 24 2019 08:14:22 GMT+0300 (Eastern European Summer Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
